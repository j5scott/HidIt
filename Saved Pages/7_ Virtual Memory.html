
<!-- saved from url=(0085)file:///C:/Users/Jeremy/Desktop/hideit/HidIt/Saved%20Pages/7_%20Virtual%20Memory.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="GENERATOR" content="Adobe PageMill 3.0 Win">
  <title>Operating Systems: Virtual Memory</title><style>.hideWord{color:blue;background-color:blue}.hideWord2{color:white;background-color:white}.hoverOver{color:red;opacity:1;background-color:white}.whiteBG{background-color:white!important}.imageHide{opacity:0.02!important}.imageReveal{opacity:1.0!important}.imageReveal:parent{background-color:white!important}.imageHide:parent{background-color:blue!important}</style></head>
<body bgcolor="#ffff80" class="whiteBG">

<h1><span></span><span><span></span></span><span></span><center><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>Virtual</span></span><span></span> <span></span><span><span>Memory</span></span><span></span> <span></span><span><span>
</span></span><span></span></center></h1>

<h3></h3>

<ol>
  <li><span></span><span><span>Abraham</span></span><span></span> <span></span><span><span>Silberschatz,</span></span><span></span> <span></span><span><span>Greg</span></span><span></span> <span></span><span><span>Gagne,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>Peter</span></span><span></span> <span></span><span><span>Baer</span></span><span></span> <span></span><span><span>Galvin,</span></span><span></span> <span></span><span><span>"Operating</span></span><span></span> <span></span><span><span>System</span></span><span></span> <span></span><span><span>Concepts,</span></span><span></span> <span></span><span><span>Ninth</span></span><span></span> <span></span><span><span>Edition</span></span><span></span> <span></span><span><span>",</span></span><span></span> <span></span><span><span>Chapter</span></span><span></span> </li></ol>

<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>1</span></span><span></span> </h3>
<ul>
  <li><span></span><span><span>Preceding</span></span><span></span> <span></span><span><span>sections</span></span><span></span> <span></span><span><span>talked</span></span><span></span> <span></span><span><span>about</span></span><span></span> <span></span><span><span>how</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>avoid</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>fragmentation</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>breaking</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>requirements</span></span><span></span> <span></span><span><span>down</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>smaller</span></span><span></span> <span></span><span><span>bites</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>storing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>non-contiguously</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>However</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>entire</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>still</span></span><span></span> <span></span><span><span>had</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>stored</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>somewhere</span></span><span></span>.</li>
  <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>practice,</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>real</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>pages,</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>least</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>once,</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>several</span></span><span></span> <span></span><span><span>reasons:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Error</span></span><span></span> <span></span><span><span>handling</span></span><span></span> <span></span><span><span>code</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>unless</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>specific</span></span><span></span> <span></span><span><span>error</span></span><span></span> <span></span><span><span>occurs,</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>quite</span></span><span></span> <span></span><span><span>rare</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Arrays</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>often</span></span><span></span> <span></span><span><span>over-sized</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>worst-case</span></span><span></span> <span></span><span><span>scenarios,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>small</span></span><span></span> <span></span><span><span>fraction</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>arrays</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>actually</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>practice</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Certain</span></span><span></span> <span></span><span><span>features</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>certain</span></span><span></span> <span></span><span><span>programs</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>rarely</span></span><span></span> <span></span><span><span>used,</span></span><span></span> <span></span><span><span>such</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>routine</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>balance</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>federal</span></span><span></span> <span></span><span><span>budget</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>:-)</span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>ability</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>load</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>portions</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>were</span></span><span></span> <span></span><span><span>actually</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span class="hideWord"><span class="hideWord">and</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span>when</span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>were</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>several</span></span><span></span> <span></span><span><span>benefits:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Programs</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>written</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>much</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span class="hideWord"><span class="hideWord">memory</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>physically</span></span><span></span> <span></span><span><span>exists</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>computer</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Because</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>fraction</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>total</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space,</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>left</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>programs,</span></span><span></span> <span></span><span><span>improving</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>utilization</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>throughput</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Less</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>swapping</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>RAM,</span></span><span></span> <span></span><span><span>speeding</span></span><span></span> <span></span><span><span>things</span></span><span></span> <span></span><span><span>up</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  <li><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>shows</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>general</span></span><span></span> <span></span><span><span>layout</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>much</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>physical</span></span><span></span> <span></span><span><span>memory:</span></span><span></span> </li>
</ul>
<p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_01_VirtualMemoryLarger.jpg" width="733" height="585"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Diagram</span></span><span></span> <span></span><span><span>showing</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>physical</span></span><span></span> <span></span><span><span>memory</span></span><span></span></strong></p>
<ul>
  <li><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>shows</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>virtual</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>programmers</span></span><span></span> <span></span><span><span>logical</span></span><span></span> <span></span><span><span>view</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>storage</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>actual</span></span><span></span> <span></span><span><span>physical</span></span><span></span> <span></span><span><span>layout</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>controlled</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process's</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span>.</li>
  <li><span></span><span><span>Note</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>shown</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>sparse</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>A</span></span><span></span> <span></span><span><span>great</span></span><span></span> <span></span><span><span>hole</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>middle</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>never</span></span><span></span> <span></span><span><span>used,</span></span><span></span> <span></span><span><span>unless</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>stack</span></span><span></span> <span></span><span><span>and/or</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>heap</span></span><span></span> <span></span><span><span>grow</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>fill</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>hole</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
</ul>
<p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_02_VirtualAddressSpace.jpg" width="281" height="651"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Virtual</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span></strong></p>
<ul>
  <li><span></span><span><span>Virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>allows</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>sharing</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>files</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>multiple</span></span><span></span> <span></span><span><span>processes,</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>several</span></span><span></span> <span></span><span><span>benefits:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>System</span></span><span></span> <span></span><span><span>libraries</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>mapping</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>process</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Processes</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>share</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>mapping</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>process</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Process</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>during</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>fork(</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>call,</span></span><span></span> <span></span><span><span>eliminating</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>copy</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>original</span></span><span></span> <span></span><span><span>(&nbsp;parent&nbsp;)</span></span><span></span> <span></span><span><span>process</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </li>
</ul>
<p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_03_SharedLibrary.jpg" width="646" height="435"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>3</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Shared</span></span><span></span> <span></span><span><span>library</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span></strong></p>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>Demand</span></span><span></span> </h3>
<ul>
  <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>basic</span></span><span></span> <span></span><span><span>idea</span></span><span></span> <span></span><span><span>behind</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>demand</span></span><span></span> <span></span><span><span>paging</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>in,</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>once</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Rather</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>needs</span></span><span></span> <span></span><span><span>them</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>demand</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>termed</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>lazy</span></span><span></span> <span></span><span><span>swapper</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>although</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>pager</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>accurate</span></span><span></span> <span></span><span><span>term</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
</ul>
<p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_04_PagedMemoryTransfer.jpg" width="578" height="532"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Transfer</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>contiguous</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>space</span></span><span></span></strong></p>
<blockquote>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>2</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>Basic</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>basic</span></span><span></span> <span></span><span><span>idea</span></span><span></span> <span></span><span><span>behind</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>in,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pager</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>loads</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>those</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>expects</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>(&nbsp;right</span></span><span></span> <span></span><span><span>away</span></span><span></span>.</li>
    <li><span></span><span><span>Pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>loaded</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>marked</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>invalid</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table,</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>invalid</span></span><span></span> <span></span><span><span>bit</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;The</span></span><span></span> <span></span><span><span>rest</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>entry</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>either</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>blank</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>contain</span></span><span></span> <span></span><span><span>information</span></span><span></span> <span></span><span><span>about</span></span><span></span> <span></span><span><span>where</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>find</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>swapped-out</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>hard</span></span><span></span> <span></span><span><span>drive</span></span><span></span>.</li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>ever</span></span><span></span> <span></span><span><span>accesses</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>loaded</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>(&nbsp;</span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>memory</span></span><span></span> <span></span><span><span>resident</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>pages&nbsp;),</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>runs</span></span><span></span> <span></span><span><span>exactly</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>were</span></span><span></span> <span></span><span><span>loaded</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
</blockquote>
<p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_05_PageTable.jpg" width="720" height="699" align="center"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>5</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>main</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span></strong></p>
<blockquote>
  <ul>
    <li><span></span><span><span>On</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>hand,</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>originally</span></span><span></span> <span></span><span><span>loaded</span></span><span></span> <span></span><span><span>up,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>trap</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>generated,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>handled</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>series</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>steps:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>The</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>requested</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>checked,</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>make</span></span><span></span> <span></span><span><span>sure</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>valid</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>request</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>invalid,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>terminated</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Otherwise,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>in</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>A</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>located,</span></span><span></span> <span></span><span><span>possibly</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>free-frame</span></span><span></span> <span></span><span><span>list</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>A</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>operation</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>scheduled</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>bring</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>necessary</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>disk</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>usually</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>wait,</span></span><span></span> <span></span><span><span>allowing</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>meantime</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>When</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>operation</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>complete,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process's</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>updated</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>new</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>number,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>invalid</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>changed</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>indicate</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>now</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>valid</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>reference</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>The</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>caused</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>now</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>restarted</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>beginning,</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>soon</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span>another</span></span><span></span> <span></span><span><span>turn</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>CPU</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_06_PageFaultSteps.jpg" width="744" height="624"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>6</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Steps</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>handling</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <ul>
    <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>extreme</span></span><span></span> <span></span><span><span>case,</span></span><span></span> <span></span><span><span>NO</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>until</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>requested</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>known</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>pure</span></span><span></span> <span></span><span><span>demand</span></span><span></span> <span></span><span><span>paging</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em></li>
    <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>theory</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>generate</span></span><span></span> <span></span><span><span>multiple</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>practice</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>very</span></span><span></span> <span></span><span><span>rare,</span></span><span></span> <span></span><span><span>due</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>locality</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>reference</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>covered</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>section</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>6</span></span><span></span>.<span></span><span><span>1</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>hardware</span></span><span></span> <span></span><span><span>necessary</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>support</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>swapping:</span></span><span></span> <span></span><span><span>A</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>secondary</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;</span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>Swap</span></span><span></span> <span></span><span><span>space,</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>whose</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>discussed</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>chapter</span></span><span></span> <span></span><span><span>12</span></span><span></span>.<span></span><span><span>&nbsp;)</span></span><span></span> </li>
    <li><span></span><span><span>A</span></span><span></span> <span></span><span><span>crucial</span></span><span></span> <span></span><span><span>part</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>restarted</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>scratch</span></span><span></span> <span></span><span><span>once</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>desired</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>made</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>For</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>simple</span></span><span></span> <span></span><span><span>instructions</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>major</span></span><span></span> <span></span><span><span>difficulty</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>However</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>architectures</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>allow</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>single</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>modify</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>fairly</span></span><span></span> <span></span><span><span>large</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>data,</span></span><span></span> <span></span><span><span>(&nbsp;which</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>span</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>boundary&nbsp;),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span>modified</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>occurs,</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>cause</span></span><span></span> <span></span><span><span>problems</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>One</span></span><span></span> <span></span><span><span>solution</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>both</span></span><span></span> <span></span><span><span>ends</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>executing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>instruction,</span></span><span></span> <span></span><span><span>guaranteeing</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>necessary</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>get</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>begins</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>2</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>Performance</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>Demand</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Obviously</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>slowdown</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>performance</span></span><span></span> <span></span><span><span>hit</span></span><span></span> <span></span><span><span>whenever</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>occurs</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>go</span></span><span></span> <span></span><span><span>get</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>memory,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>just</span></span><span></span> <span></span><span><span>how</span></span><span></span> <span></span><span><span>big</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>hit</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>it</span></span><span></span> </li>
    <li><span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>steps</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>occur</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>servicing</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>(&nbsp;see</span></span><span></span> <span></span><span><span>book</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>full</span></span><span></span> <span></span><span><span>details&nbsp;),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>steps</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>optional</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>variable</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>But</span></span><span></span> <span></span><span><span>just</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>sake</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>discussion,</span></span><span></span> <span></span><span><span>suppose</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>normal</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>requires</span></span><span></span> <span></span><span><span>200</span></span><span></span> <span></span><span><span>nanoseconds,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>servicing</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>takes</span></span><span></span> <span></span><span><span>8</span></span><span></span> <span></span><span><span>milliseconds</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>8,000,000</span></span><span></span> <span></span><span><span>nanoseconds,</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>40,000</span></span><span></span> <span></span><span><span>times</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>normal</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>access</span></span><span></span>.<span></span><span><span>&nbsp;)</span></span><span></span> <span></span><span><span>With</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>rate</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>p,</span></span><span></span> <span></span><span><span>(&nbsp;on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>scale</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>0</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>1&nbsp;),</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>effective</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>is</span></span><span></span> </li>
  </ul>
  <blockquote>
    <p align="center"><span></span><span><span>(</span></span><span></span> <span></span><span><span>1</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>p</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>*</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>200</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>+</span></span><span></span> <span></span><span><span>p</span></span><span></span> <span></span><span><span>*</span></span><span></span> </p>
    <p align="center"><span></span><span><span>=</span></span><span></span> <span></span><span><span>200</span></span><span></span> <span></span><span><span>+</span></span><span></span> <span></span><span><span>7,999,800</span></span><span></span> <span></span><span><span>*</span></span><span></span> </p>
    <p><span></span><span><span>which</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>clearly</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>depends</span></span><span></span> <span></span><span><span>heavily</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>p!</span></span><span></span> <span></span><span><span>Even</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>1000</span></span><span></span> <span></span><span><span>causes</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>effective</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>drops</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>200</span></span><span></span> <span></span><span><span>nanoseconds</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>8</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>microseconds,</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>slowdown</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>factor</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>40</span></span><span></span> <span></span><span><span>times</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>order</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>keep</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>slowdown</span></span><span></span> <span></span><span><span>less</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>10%,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>rate</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>less</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>0</span></span><span></span>.<span></span><span><span>0000025,</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>399,990</span></span><span></span> <span></span><span><span>accesses</span></span><span></span>.</p>
  </blockquote>
  <ul>
    <li><span></span><span><span>A</span></span><span></span> <span></span><span><span>subtlety</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>swap</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>faster</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>regular</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>system,</span></span><span></span> <span></span><span><span>because</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>does</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>go</span></span><span></span> <span></span><span><span>through</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>whole</span></span><span></span> <span></span><span><span>directory</span></span><span></span> <span></span><span><span>structure</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>For</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>reason</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>transfer</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>entire</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>swap</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>starting</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process,</span></span><span></span> <span></span><span><span>so</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>future</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>occurs</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>(&nbsp;relatively&nbsp;)</span></span><span></span> <span></span><span><span>faster</span></span><span></span> <span></span><span><span>swap</span></span><span></span> <span></span><span><span>space</span></span><span></span>.</li>
    <li><span></span><span><span>Some</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>demand</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>directly</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>binary</span></span><span></span> <span></span><span><span>code</span></span><span></span> <span></span><span><span>(&nbsp;which</span></span><span></span> <span></span><span><span>never</span></span><span></span> <span></span><span><span>changes</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>hence</span></span><span></span> <span></span><span><span>does</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>stored</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>operation&nbsp;),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>reserve</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>swap</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>segments</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>stored</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>approach</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>both</span></span><span></span> <span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>BSD</span></span><span></span> <span></span><span><span>Unix</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
</blockquote>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>3</span></span><span></span> </h3>
<ul>
  <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>idea</span></span><span></span> <span></span><span><span>behind</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>copy-on-write</span></span><span></span> <span></span><span><span>fork</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>parent</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>actually</span></span><span></span> <span></span><span><span>copied</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>child</span></span><span></span> <span></span><span><span>until</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>changes</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>They</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>simply</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>between</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>meantime,</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>needs</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>copied</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>ever</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span>written</span></span><span></span> <span></span><span><span>to</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>reasonable</span></span><span></span> <span></span><span><span>approach,</span></span><span></span> <span></span><span><span>since</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>child</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>usually</span></span><span></span> <span></span><span><span>issues</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>exec(&nbsp;)</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>call</span></span><span></span> <span></span><span><span>immediately</span></span><span></span> <span></span><span><span>after</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>fork</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
</ul>
<p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_07_Page_C_Unmodified.jpg" width="728" height="305"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>7</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Before</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>1</span></span><span></span> <span></span><span><span>modifies</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>C</span></span><span></span>.<span></span><span><span></span></span><span></span></strong></p>
<p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_08_Page_C_Modified.jpg" width="727" height="346"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>8</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>After</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>1</span></span><span></span> <span></span><span><span>modifies</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>C</span></span><span></span>.<span></span><span><span></span></span><span></span></strong></p>
<ul>
  <li><span></span><span><span>Obviously</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>modified</span></span><span></span> <span></span><span><span>even</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>labeled</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>copy-on-write</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Code</span></span><span></span> <span></span><span><span>segments</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>simply</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>shared</span></span><span></span>.</li>
  <li><span></span><span><span>Pages</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>satisfy</span></span><span></span> <span></span><span><span>copy-on-write</span></span><span></span> <span></span><span><span>duplications</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>typically</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>zero-fill-on-demand</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>meaning</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>previous</span></span><span></span> <span></span><span><span>contents</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>zeroed</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>copy</span></span><span></span> <span></span><span><span>proceeds</span></span><span></span>.</li>
  <li><span></span><span><span>Some</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>provide</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>alternative</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>fork(&nbsp;)</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>call</span></span><span></span> <span></span><span><span>called</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>fork,</span></span><span></span> <span></span><span><span>vfork(&nbsp;)</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>case</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>parent</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>suspended,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>child</span></span><span></span> <span></span><span><span>uses</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>parent's</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>pages</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>very</span></span><span></span> <span></span><span><span>fast</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>creation,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>requires</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>child</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>modify</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>performing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>exec(&nbsp;)</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>call</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>essence</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>addresses</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>question</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>executes</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>after</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>call</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>fork,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>parent</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>child</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>With</span></span><span></span> <span></span><span><span>vfork,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>parent</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>suspended,</span></span><span></span> <span></span><span><span>allowing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>child</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>execute</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>until</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>calls</span></span><span></span> <span></span><span><span>exec(</span></span><span></span> <span></span><span><span>),</span></span><span></span> <span></span><span><span>sharing</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>parent</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>meantime</span></span><span></span>.</li>
</ul>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h3>
<ul>
  <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>order</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>make</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory,</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>load</span></span><span></span> <span></span><span><span>several</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>time</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Since</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>load</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>actually</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>time,</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>room</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>load</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>had</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>load</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>entire</span></span><span></span> <span></span><span><span>process</span></span><span></span>.</li>
  <li><span></span><span><span>However</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>purposes</span></span><span></span> <span></span><span><span>(&nbsp;such</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>buffering&nbsp;),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>what</span></span><span></span> <span></span><span><span>happens</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>suddenly</span></span><span></span> <span></span><span><span>decides</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>needs</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>aren't</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>available?</span></span><span></span> <span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>several</span></span><span></span> <span></span><span><span>possible</span></span><span></span> <span></span><span><span>solutions</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>consider:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Adjust</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>buffering,</span></span><span></span> <span></span><span><span>etc</span></span><span></span>.<span></span><span><span>,</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>user</span></span><span></span> <span></span><span><span>processes</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>decision</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>how</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>allocate</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>versus</span></span><span></span> <span></span><span><span>user</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>complex</span></span><span></span> <span></span><span><span>one,</span></span><span></span> <span></span><span><span>yielding</span></span><span></span> <span></span><span><span>different</span></span><span></span> <span></span><span><span>policies</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>different</span></span><span></span> <span></span><span><span>systems</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;Some</span></span><span></span> <span></span><span><span>allocate</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>fixed</span></span><span></span> <span></span><span><span>amount</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>I/O,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>others</span></span><span></span> <span></span><span><span>let</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>contend</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>along</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>everything</span></span><span></span> <span></span><span><span>else</span></span><span></span>.<span></span><span><span>&nbsp;)</span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Put</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>requesting</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>wait</span></span><span></span> <span></span><span><span>queue</span></span><span></span> <span></span><span><span>until</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>become</span></span><span></span> <span></span><span><span>available</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Swap</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>completely,</span></span><span></span> <span></span><span><span>freeing</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>frames</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Find</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>isn't</span></span><span></span> <span></span><span><span>being</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>right</span></span><span></span> <span></span><span><span>now,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>swap</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>disk,</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>freeing</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>requesting</span></span><span></span> <span></span><span><span>it</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>known</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>common</span></span><span></span> <span></span><span><span>solution</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>different</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>subject</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>remainder</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>section</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </li>
</ul>
<p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_09_PageNeed.jpg" width="749" height="551"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>9</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Ned</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span>.<span></span><span><span></span></span><span></span></strong></p>
<blockquote>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>Basic</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>previously</span></span><span></span> <span></span><span><span>discussed</span></span><span></span> <span></span><span><span>page-fault</span></span><span></span> <span></span><span><span>processing</span></span><span></span> <span></span><span><span>assumed</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>free-frame</span></span><span></span> <span></span><span><span>list</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Now</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page-fault</span></span><span></span> <span></span><span><span>handling</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>modified</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>necessary,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>follows:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Find</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>location</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>desired</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>disk,</span></span><span></span> <span></span><span><span>either</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>swap</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>system</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Find</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frame:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol type="a"><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frame,</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>it</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>no</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frame,</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>select</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>existing</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>replaced,</span></span><span></span> <span></span><span><span>known</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>victim</span></span><span></span> <span></span><span><span>frame</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li type="a"><span></span><span><span>Write</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>victim</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>disk</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Change</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>related</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>tables</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>indicate</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>no</span></span><span></span> <span></span><span><span>longer</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Read</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>desired</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>store</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>frame</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Adjust</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>related</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>tables</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>indicate</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>change</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Restart</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>waiting</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>page</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <blockquote>
    <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_10_PageReplacement.jpg" width="700" height="521"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>10</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  </blockquote>
  <ul>
    <li><span></span><span><span>Note</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>step</span></span><span></span> <span></span><span><span>3c</span></span><span></span> <span></span><span><span>adds</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>extra</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>write</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page-fault</span></span><span></span> <span></span><span><span>handling,</span></span><span></span> <span></span><span><span>effectively</span></span><span></span> <span></span><span><span>doubling</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>required</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>alleviated</span></span><span></span> <span></span><span><span>somewhat</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>assigning</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>modify</span></span><span></span> <span></span><span><span>bit,</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>or</span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span> <span></span><span><span>dirty</span></span><span></span> <span></span><span><span>bit</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>page,</span></span><span></span> <span></span><span><span>indicating</span></span><span></span> <span></span><span><span>whether</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>changed</span></span><span></span> <span></span><span><span>since</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>last</span></span><span></span> <span></span><span><span>loaded</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>disk</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>dirty</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>unchanged,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>does</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>written</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>disk</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Otherwise</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>write</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>required</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>It</span></span><span></span> <span></span><span><span>should</span></span><span></span> <span></span><span><span>come</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>no</span></span><span></span> <span></span><span><span>surprise</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>strategies</span></span><span></span> <span></span><span><span>specifically</span></span><span></span> <span></span><span><span>look</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>dirty</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>preferentially</span></span><span></span> <span></span><span><span>select</span></span><span></span> <span></span><span><span>clean</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>victim</span></span><span></span> <span></span><span><span>pages</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>It</span></span><span></span> <span></span><span><span>should</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>obvious</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>unmodifiable</span></span><span></span> <span></span><span><span>code</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>never</span></span><span></span> <span></span><span><span>get</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>dirty</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>set</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>major</span></span><span></span> <span></span><span><span>requirements</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>implement</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>successful</span></span><span></span> <span></span><span><span>demand</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>system</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>We</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>develop</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>frame-allocation</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>The</span></span><span></span> <span></span><span><span>former</span></span><span></span> <span></span><span><span>centers</span></span><span></span> <span></span><span><span>around</span></span><span></span> <span></span><span><span>how</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>needs</span></span><span></span> <span></span><span><span>),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>latter</span></span><span></span> <span></span><span><span>deals</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>how</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>select</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>no</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>available</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>overall</span></span><span></span> <span></span><span><span>goal</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>selecting</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>tuning</span></span><span></span> <span></span><span><span>these</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>generate</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>fewest</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>overall</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Because</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>so</span></span><span></span> <span></span><span><span>slow</span></span><span></span> <span></span><span><span>relative</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>access,</span></span><span></span> <span></span><span><span>even</span></span><span></span> <span></span><span><span>slight</span></span><span></span> <span></span><span><span>improvements</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>these</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>yield</span></span><span></span> <span></span><span><span>large</span></span><span></span> <span></span><span><span>improvements</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>overall</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>performance</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>Algorithms</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>evaluated</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>string</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>accesses</span></span><span></span> <span></span><span><span>known</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>string,</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>generated</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>(&nbsp;at</span></span><span></span> <span></span><span><span>least&nbsp;)</span></span><span></span> <span></span><span><span>three</span></span><span></span> <span></span><span><span>common</span></span><span></span> <span></span><span><span>ways:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Randomly</span></span><span></span> <span></span><span><span>generated,</span></span><span></span> <span></span><span><span>either</span></span><span></span> <span></span><span><span>evenly</span></span><span></span> <span></span><span><span>distributed</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>distribution</span></span><span></span> <span></span><span><span>curve</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>observed</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>behavior</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>fastest</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>easiest</span></span><span></span> <span></span><span><span>approach,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>reflect</span></span><span></span> <span></span><span><span>real</span></span><span></span> <span></span><span><span>performance</span></span><span></span> <span></span><span><span>well,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>ignores</span></span><span></span> <span></span><span><span>locality</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>reference</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Specifically</span></span><span></span> <span></span><span><span>designed</span></span><span></span> <span></span><span><span>sequences</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>These</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>useful</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>illustrating</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>properties</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>comparative</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>published</span></span><span></span> <span></span><span><span>papers</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>textbooks,</span></span><span></span> <span></span><span><span>(&nbsp;and</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>homework</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>exam</span></span><span></span> <span></span><span><span>problems</span></span><span></span>.<span></span><span><span>&nbsp;:-)&nbsp;)</span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Recorded</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>references</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>live</span></span><span></span> <span></span><span><span>system</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>best</span></span><span></span> <span></span><span><span>approach,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>amount</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>collected</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>enormous,</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>order</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>million</span></span><span></span> <span></span><span><span>addresses</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>second</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>volume</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>collected</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>reduced</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>making</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>important</span></span><span></span> <span></span><span><span>observations:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Only</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>accessed</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>relevant</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>offset</span></span><span></span> <span></span><span><span>within</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>does</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>affect</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>operations</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Successive</span></span><span></span> <span></span><span><span>accesses</span></span><span></span> <span></span><span><span>within</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>treated</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>single</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>request,</span></span><span></span> <span></span><span><span>because</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>requests</span></span><span></span> <span></span><span><span>after</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>guaranteed</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>hits</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;Since</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>no</span></span><span></span> <span></span><span><span>intervening</span></span><span></span> <span></span><span><span>requests</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>remove</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span>.<span></span><span><span>&nbsp;)</span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>So</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>were</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>100</span></span><span></span> <span></span><span><span>bytes,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>sequence</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>requests</span></span><span></span> <span></span><span><span>(&nbsp;0100,</span></span><span></span> <span></span><span><span>0432,</span></span><span></span> <span></span><span><span>0101,</span></span><span></span> <span></span><span><span>0612,</span></span><span></span> <span></span><span><span>0634,</span></span><span></span> <span></span><span><span>0688,</span></span><span></span> <span></span><span><span>0132,</span></span><span></span> <span></span><span><span>0038,</span></span><span></span> <span></span><span><span>0420&nbsp;)</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>reduce</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>requests</span></span><span></span> <span></span><span><span>(&nbsp;1,</span></span><span></span> <span></span><span><span>4,</span></span><span></span> <span></span><span><span>1,</span></span><span></span> <span></span><span><span>6,</span></span><span></span> <span></span><span><span>1,</span></span><span></span> <span></span><span><span>0,</span></span><span></span> <span></span><span><span>4&nbsp;)</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>As</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>increases,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>should</span></span><span></span> <span></span><span><span>decrease,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>shown</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>11:</span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_11_PageFaultGraph.jpg" width="665" height="400"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>11</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Graph</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>versus</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>frames</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>A</span></span><span></span> <span></span><span><span>simple</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>obvious</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>strategy</span></span><span></span> <span></span><span><span>is</span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span> <span></span><span><span>FIFO</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>i</span></span><span></span>.<span></span><span><span>e</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>first-in-first-out</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>As</span></span><span></span> <span></span><span><span>new</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>brought</span></span><span></span> <span></span><span><span>in,</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>added</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>tail</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>queue,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>head</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>queue</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>victim</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>following</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>20</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>requests</span></span><span></span> <span></span><span><span>result</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>15</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults:</span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_12_FIFO_PageReplacement.jpg" width="759" height="220"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>12</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <ul>
    <li><span></span><span><span>Although</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>simple</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>easy,</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>always</span></span><span></span> <span></span><span><span>optimal,</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>even</span></span><span></span> <span></span><span><span>efficient</span></span><span></span>.</li>
    <li><span></span><span><span>An</span></span><span></span> <span></span><span><span>interesting</span></span><span></span> <span></span><span><span>effect</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>occur</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>Belady's</span></span><span></span> <span></span><span><span>anomaly</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>increasing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>actually</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>increase</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>occur!</span></span><span></span> <span></span><span><span>Consider,</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>following</span></span><span></span> <span></span><span><span>chart</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>sequence</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>1,</span></span><span></span> <span></span><span><span>2,</span></span><span></span> <span></span><span><span>3,</span></span><span></span> <span></span><span><span>4,</span></span><span></span> <span></span><span><span>1,</span></span><span></span> <span></span><span><span>2,</span></span><span></span> <span></span><span><span>5,</span></span><span></span> <span></span><span><span>1,</span></span><span></span> <span></span><span><span>2,</span></span><span></span> <span></span><span><span>3,</span></span><span></span> <span></span><span><span>4,</span></span><span></span> <span></span><span><span>5</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>varying</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>frames</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Obviously</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>maximum</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>12</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>request</span></span><span></span> <span></span><span><span>generates</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>5</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>loaded</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>once</span></span><span></span> <span></span><span><span>),</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>between</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>interesting</span></span><span></span> <span></span><span><span>results:</span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_13_PageFaultCurve.jpg" width="609" height="395"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>13</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Page-fault</span></span><span></span> <span></span><span><span>curve</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>string</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>3</span></span><span></span> <span></span><span><span>Optimal</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>discovery</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>Belady's</span></span><span></span> <span></span><span><span>anomaly</span></span><span></span> <span></span><span><span>lead</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>search</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>optimal</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>simply</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>yields</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>lowest</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>possible</span></span><span></span> <span></span><span><span>page-faults,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>does</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>suffer</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>Belady's</span></span><span></span> <span></span><span><span>anomaly</span></span><span></span>.</li>
    <li><span></span><span><span>Such</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>does</span></span><span></span> <span></span><span><span>exist,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>called</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>OPT</span></span><span></span> <span></span><span><span>or</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>MIN</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>simply</span></span><span></span> <span></span><span><span>"Replace</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>longest</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>future</span></span><span></span>.</li>
    <li><span></span><span><span>For</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>14</span></span><span></span> <span></span><span><span>shows</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>applying</span></span><span></span> <span></span><span><span>OPT</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>string</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>possible</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Since</span></span><span></span> <span></span><span><span>6</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page-faults</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>unavoidable</span></span><span></span> <span></span><span><span>(&nbsp;the</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>new</span></span><span></span> <span></span><span><span>page&nbsp;),</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>shown</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>require</span></span><span></span> <span></span><span><span>3</span></span><span></span> <span></span><span><span>times</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>(&nbsp;extra&nbsp;)</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>optimal</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;Note:</span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>book</span></span><span></span> <span></span><span><span>claims</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>three</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>required</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>algorithms,</span></span><span></span> <span></span><span><span>indicating</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>twice</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>bad</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>OPT</span></span><span></span>.</li>
    <li><span></span><span><span>Unfortunately</span></span><span></span> <span></span><span><span>OPT</span></span><span></span> <span></span><span><span>cannot</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>implemented</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>practice,</span></span><span></span> <span></span><span><span>because</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>requires</span></span><span></span> <span></span><span><span>foretelling</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>future,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>makes</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>nice</span></span><span></span> <span></span><span><span>benchmark</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>comparison</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>evaluation</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>real</span></span><span></span> <span></span><span><span>proposed</span></span><span></span> <span></span><span><span>new</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>practice</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>try</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>approximate</span></span><span></span> <span></span><span><span>OPT</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>predicting</span></span><span></span> <span></span><span><span>(&nbsp;estimating&nbsp;)</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>fashion</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>another</span></span><span></span> <span></span><span><span>what</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>longest</span></span><span></span> <span></span><span><span>period</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>time</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>basis</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>prediction</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>brought</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>longest</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>ago</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>again</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>longest</span></span><span></span> <span></span><span><span>future</span></span><span></span> <span></span><span><span>time,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>shall</span></span><span></span> <span></span><span><span>see,</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>prediction</span></span><span></span> <span></span><span><span>methods,</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>striving</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>match</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>performance</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>OPT</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_14_OptimalPageReplacement.jpg" width="754" height="220"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>14</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Optimal</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>4</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>prediction</span></span><span></span> <span></span><span><span>behind</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>LRU,</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>the</span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span> <span></span><span><span>Least</span></span><span></span> <span></span><span><span>Recently</span></span><span></span> <span></span><span><span>Used,</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>longest</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>again</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>near</span></span><span></span> <span></span><span><span>future</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;Note</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>distinction</span></span><span></span> <span></span><span><span>between</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>LRU:</span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>former</span></span><span></span> <span></span><span><span>looks</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>oldest</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>load</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>time,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>latter</span></span><span></span> <span></span><span><span>looks</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>oldest</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>use</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>time</span></span><span></span>.</li>
    <li><span></span><span><span>Some</span></span><span></span> <span></span><span><span>view</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>analogous</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>OPT,</span></span><span></span> <span></span><span><span>except</span></span><span></span> <span></span><span><span>looking</span></span><span></span> <span></span><span><span>backwards</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>instead</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>forwards</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;OPT</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>interesting</span></span><span></span> <span></span><span><span>property</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>string</span></span><span></span> <span></span><span><span>S</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>reverse</span></span><span></span> <span></span><span><span>R,</span></span><span></span> <span></span><span><span>OPT</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>generate</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>S</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>R</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>It</span></span><span></span> <span></span><span><span>turns</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>property</span></span><span></span>.</li>
    <li><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>15</span></span><span></span> <span></span><span><span>illustrates</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>our</span></span><span></span> <span></span><span><span>sample</span></span><span></span> <span></span><span><span>string,</span></span><span></span> <span></span><span><span>yielding</span></span><span></span> <span></span><span><span>12</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults,</span></span><span></span> <span></span><span><span>(&nbsp;as</span></span><span></span> <span></span><span><span>compared</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>15</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>9</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>OPT</span></span><span></span>.<span></span><span><span>&nbsp;)</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_15_LRU_PageReplacement.jpg" width="754" height="220"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>15</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <ul>
    <li><span></span><span><span>LRU</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>considered</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>good</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>policy,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>often</span></span><span></span> <span></span><span><span>used</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>problem</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>how</span></span><span></span> <span></span><span><span>exactly</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>implement</span></span><span></span> <span></span><span><span>it</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>simple</span></span><span></span> <span></span><span><span>approaches</span></span><span></span> <span></span><span><span>commonly</span></span><span></span> <span></span><span><span>used:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span></span></span><span></span><strong><span></span><span><span>Counters</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span>Every</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>increments</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>counter,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>value</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>counter</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>stored</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>entry</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>page</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Then</span></span><span></span> <span></span><span><span>finding</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>involves</span></span><span></span> <span></span><span><span>simple</span></span><span></span> <span></span><span><span>searching</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>smallest</span></span><span></span> <span></span><span><span>counter</span></span><span></span> <span></span><span><span>value</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Note</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>overflowing</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>counter</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>considered</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span></span></span><span></span><strong><span></span><span><span>Stack</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span>Another</span></span><span></span> <span></span><span><span>approach</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>stack,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>whenever</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>accessed,</span></span><span></span> <span></span><span><span>pull</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>middle</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>stack</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>place</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>top</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>always</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>bottom</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>stack</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Because</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>requires</span></span><span></span> <span></span><span><span>removing</span></span><span></span> <span></span><span><span>objects</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>middle</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>stack,</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>doubly</span></span><span></span> <span></span><span><span>linked</span></span><span></span> <span></span><span><span>list</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>recommended</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>structure</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>Note</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>both</span></span><span></span> <span></span><span><span>implementations</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>require</span></span><span></span> <span></span><span><span>hardware</span></span><span></span> <span></span><span><span>support,</span></span><span></span> <span></span><span><span>either</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>incrementing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>counter</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>managing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>stack,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>these</span></span><span></span> <span></span><span><span>operations</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>performed</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>every</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>access</span></span><span></span>.</li>
    <li><span></span><span><span>Neither</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>OPT</span></span><span></span> <span></span><span><span>exhibit</span></span><span></span> <span></span><span><span>Belady's</span></span><span></span> <span></span><span><span>anomaly</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Both</span></span><span></span> <span></span><span><span>belong</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>class</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>called</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>stack</span></span><span></span> <span></span><span><span>algorithms,</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>which</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>never</span></span><span></span> <span></span><span><span>exhibit</span></span><span></span> <span></span><span><span>Belady's</span></span><span></span> <span></span><span><span>anomaly</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>A</span></span><span></span> <span></span><span><span>stack</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>kept</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>N</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>always</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>subset</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>kept</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>N</span></span><span></span> <span></span><span><span>+</span></span><span></span> <span></span><span><span>1</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>case</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>LRU,</span></span><span></span> <span></span><span><span>(&nbsp;and</span></span><span></span> <span></span><span><span>particularly</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>stack</span></span><span></span> <span></span><span><span>implementation</span></span><span></span> <span></span><span><span>thereof&nbsp;),</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>top</span></span><span></span> <span></span><span><span>N</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>stack</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>sizes</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>N</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>anything</span></span><span></span> <span></span><span><span>larger</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_16_StackUse.jpg" width="497" height="350"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>16</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Use</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>stack</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>record</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>recent</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>references</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <blockquote>
    <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>5</span></span><span></span> <span></span><span><span>LRU-Approximation</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
    <ul>
      <li><span></span><span><span>Unfortunately</span></span><span></span> <span></span><span><span>full</span></span><span></span> <span></span><span><span>implementation</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>requires</span></span><span></span> <span></span><span><span>hardware</span></span><span></span> <span></span><span><span>support,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>few</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>provide</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>full</span></span><span></span> <span></span><span><span>hardware</span></span><span></span> <span></span><span><span>support</span></span><span></span> <span></span><span><span>necessary</span></span><span></span>.</li>
      <li><span></span><span><span>However</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>offer</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>degree</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>HW</span></span><span></span> <span></span><span><span>support,</span></span><span></span> <span></span><span><span>enough</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>approximate</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>fairly</span></span><span></span> <span></span><span><span>well</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;In</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>absence</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>ANY</span></span><span></span> <span></span><span><span>hardware</span></span><span></span> <span></span><span><span>support,</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>might</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>best</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>choice</span></span><span></span>.</li>
      <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>particular,</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>provide</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>entry</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>anytime</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>accessed</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Initially</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>zero,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>cleared</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>time</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>One</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>precision</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>enough</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>distinguish</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>accessed</span></span><span></span> <span></span><span><span>since</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>last</span></span><span></span> <span></span><span><span>clear</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>those</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>not,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>does</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>provide</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>finer</span></span><span></span> <span></span><span><span>grain</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>detail</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    </ul>
    <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>5</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>Additional-Reference-Bits</span></span><span></span> </h4>
    <ul>
      <li><span></span><span><span>Finer</span></span><span></span> <span></span><span><span>grain</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>possible</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>storing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>recent</span></span><span></span> <span></span><span><span>8</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>8-bit</span></span><span></span> <span></span><span><span>byte</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>entry,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>interpreted</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>unsigned</span></span><span></span> <span></span><span><span>int</span></span><span></span>.<span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>At</span></span><span></span> <span></span><span><span>periodic</span></span><span></span> <span></span><span><span>intervals</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>clock</span></span><span></span> <span></span><span><span>interrupts</span></span><span></span> <span></span><span><span>),</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>OS</span></span><span></span> <span></span><span><span>takes</span></span><span></span> <span></span><span><span>over,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>right-shifts</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bytes</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>bit</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>The</span></span><span></span> <span></span><span><span>high-order</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>leftmost</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>filled</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>value</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>cleared</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>At</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>time,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>smallest</span></span><span></span> <span></span><span><span>value</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>byte</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>LRU</span></span><span></span> <span></span><span><span>page</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
      <li><span></span><span><span>Obviously</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>specific</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>frequency</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>byte</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>updated</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>adjustable,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>tuned</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>give</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>fastest</span></span><span></span> <span></span><span><span>performance</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>hardware</span></span><span></span> <span></span><span><span>platform</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    </ul>
    <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>5</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>Second-Chance</span></span><span></span> </h4>
    <ul>
      <li><span></span><span><span>The</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>second</span></span><span></span> <span></span><span><span>chance</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>essentially</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>FIFO,</span></span><span></span> <span></span><span><span>except</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>give</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>chance</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>staying</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span>.<span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>When</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>replaced,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>scanned</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>(&nbsp;circular</span></span><span></span> <span></span><span><span>queue&nbsp;)</span></span><span></span> <span></span><span><span>manner</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>found</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>selected</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>victim</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If,</span></span><span></span> <span></span><span><span>however,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>does</span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>chance:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>The</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>cleared,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>search</span></span><span></span> <span></span><span><span>continues</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>found</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>did</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>selected</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>victim,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>(&nbsp;the</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>being</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>chance&nbsp;)</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>allowed</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>stay</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If</span></span><span></span> <span></span><span><span>,</span></span><span></span> <span></span><span><span>however,</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>no</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>selected</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>victim</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span> <span></span><span><span>search</span></span><span></span> <span></span><span><span>circles</span></span><span></span> <span></span><span><span>back</span></span><span></span> <span></span><span><span>around</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>pass</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
      <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>chance</span></span><span></span> <span></span><span><span>degrades</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>FIFO,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>requires</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>complete</span></span><span></span> <span></span><span><span>search</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span>.</li>
      <li><span></span><span><span>As</span></span><span></span> <span></span><span><span>long</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>whose</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>referenced</span></span><span></span> <span></span><span><span>frequently</span></span><span></span> <span></span><span><span>enough</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>stay</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>indefinitely</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
      <li><span></span><span><span>This</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>known</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>clock</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>algorithm,</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>hands</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>clock</span></span><span></span> <span></span><span><span>moving</span></span><span></span> <span></span><span><span>around</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>circular</span></span><span></span> <span></span><span><span>queue</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    </ul>
    <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_17_SecondChance.jpg" width="711" height="641"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>17</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Second-chance</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>clock</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </p>
    <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>5</span></span><span></span>.<span></span><span><span>3</span></span><span></span> <span></span><span><span>Enhanced</span></span><span></span> <span></span><span><span>Second-Chance</span></span><span></span> </h4>
    <ul>
      <li><span></span><span><span>The</span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>enhanced</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>chance</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span>looks</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>modify</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>(&nbsp;dirty</span></span><span></span> <span></span><span><span>bit&nbsp;)</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>ordered</span></span><span></span> <span></span><span><span>page,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>classifies</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>four</span></span><span></span> <span></span><span><span>classes:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>(</span></span><span></span> <span></span><span><span>0,</span></span><span></span> <span></span><span><span>0</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Neither</span></span><span></span> <span></span><span><span>recently</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>nor</span></span><span></span> <span></span><span><span>modified</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>(</span></span><span></span> <span></span><span><span>0,</span></span><span></span> <span></span><span><span>1</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Not</span></span><span></span> <span></span><span><span>recently</span></span><span></span> <span></span><span><span>used,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>modified</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>(</span></span><span></span> <span></span><span><span>1,</span></span><span></span> <span></span><span><span>0</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Recently</span></span><span></span> <span></span><span><span>used,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>clean</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>(</span></span><span></span> <span></span><span><span>1,</span></span><span></span> <span></span><span><span>1</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Recently</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>modified</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
      <li><span></span><span><span>This</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>searches</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>circular</span></span><span></span> <span></span><span><span>fashion</span></span><span></span> <span></span><span><span>(&nbsp;in</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>four</span></span><span></span> <span></span><span><span>passes&nbsp;),</span></span><span></span> <span></span><span><span>looking</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>find</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>lowest</span></span><span></span> <span></span><span><span>numbered</span></span><span></span> <span></span><span><span>category</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>I</span></span><span></span>.<span></span><span><span>e</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>makes</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>pass</span></span><span></span> <span></span><span><span>looking</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>(&nbsp;0,&nbsp;0&nbsp;),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>can't</span></span><span></span> <span></span><span><span>find</span></span><span></span> <span></span><span><span>one,</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>makes</span></span><span></span> <span></span><span><span>another</span></span><span></span> <span></span><span><span>pass</span></span><span></span> <span></span><span><span>looking</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>(&nbsp;0,&nbsp;1&nbsp;),</span></span><span></span> <span></span><span><span>etc</span></span><span></span>.</li>
      <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>main</span></span><span></span> <span></span><span><span>difference</span></span><span></span> <span></span><span><span>between</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>previous</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>preference</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>replacing</span></span><span></span> <span></span><span><span>clean</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>possible</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>	</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    </ul>
  </blockquote>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>6</span></span><span></span> <span></span><span><span>Counting-Based</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>several</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>counting</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>references</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>made</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>page,</span></span><span></span> <span></span><span><span>such</span></span><span></span> <span></span><span><span>as:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span><em><span></span><span><span>Least</span></span><span></span> <span></span><span><span>Frequently</span></span><span></span> <span></span><span><span>Used,</span></span><span></span> <span></span><span><span>LFU:</span></span><span></span></em><span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span>Replace</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>lowest</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>count</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>A</span></span><span></span> <span></span><span><span>problem</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>occur</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>frequently</span></span><span></span> <span></span><span><span>initially</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>more,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>count</span></span><span></span> <span></span><span><span>remains</span></span><span></span> <span></span><span><span>high</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>A</span></span><span></span> <span></span><span><span>solution</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>problem</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>right-shift</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>counters</span></span><span></span> <span></span><span><span>periodically,</span></span><span></span> <span></span><span><span>yielding</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>time-decaying</span></span><span></span> <span></span><span><span>average</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>count</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span><em><span></span><span><span>Most</span></span><span></span> <span></span><span><span>Frequently</span></span><span></span> <span></span><span><span>Used,</span></span><span></span> <span></span><span><span>MFU:</span></span><span></span></em><span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span>Replace</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>highest</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>count</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>logic</span></span><span></span> <span></span><span><span>behind</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>idea</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>already</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>referenced</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>lot</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>long</span></span><span></span> <span></span><span><span>time,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>probably</span></span><span></span> <span></span><span><span>done</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>them,</span></span><span></span> <span></span><span><span>whereas</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>referenced</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>few</span></span><span></span> <span></span><span><span>times</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>recently</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>loaded,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>still</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>them</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>general</span></span><span></span> <span></span><span><span>counting-based</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>commonly</span></span><span></span> <span></span><span><span>used,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>implementation</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>expensive</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>approximate</span></span><span></span> <span></span><span><span>OPT</span></span><span></span> <span></span><span><span>well</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>7</span></span><span></span> <span></span><span><span>Page-Buffering</span></span><span></span> </h4>
  <blockquote>
    <p><span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>page-buffering</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>conjunction</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>afore-mentioned</span></span><span></span> <span></span><span><span>algorithms,</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>improve</span></span><span></span> <span></span><span><span>overall</span></span><span></span> <span></span><span><span>performance</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>sometimes</span></span><span></span> <span></span><span><span>make</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>inherent</span></span><span></span> <span></span><span><span>weaknesses</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>hardware</span></span><span></span> <span></span><span><span>and/or</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>underlying</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> </p>
  </blockquote>
  <ul>
    <li><span></span><span><span>Maintain</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>certain</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>times</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>When</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page-fault</span></span><span></span> <span></span><span><span>occurs,</span></span><span></span> <span></span><span><span>go</span></span><span></span> <span></span><span><span>ahead</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>allocate</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>list</span></span><span></span> <span></span><span><span>first,</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>get</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>requesting</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>running</span></span><span></span> <span></span><span><span>again</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>quickly</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>possible,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>select</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>victim</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>write</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>step</span></span><span></span>.</li>
    <li><span></span><span><span>Keep</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>list</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>modified</span></span><span></span> <span></span><span><span>pages,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>otherwise</span></span><span></span> <span></span><span><span>idle,</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>write</span></span><span></span> <span></span><span><span>these</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>disk,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>clear</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>modify</span></span><span></span> <span></span><span><span>bits,</span></span><span></span> <span></span><span><span>thereby</span></span><span></span> <span></span><span><span>increasing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>chance</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>finding</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>"clean"</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>potential</span></span><span></span> <span></span><span><span>victim</span></span><span></span>.</li>
    <li><span></span><span><span>Keep</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>pool</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>remember</span></span><span></span> <span></span><span><span>what</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>made</span></span><span></span> <span></span><span><span>free</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Since</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>actually</span></span><span></span> <span></span><span><span>cleared</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>freed,</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>made</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>active</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>again</span></span><span></span> <span></span><span><span>without</span></span><span></span> <span></span><span><span>having</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>load</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>new</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>disk</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>useful</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>mistakenly</span></span><span></span> <span></span><span><span>replaces</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>fact</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>again</span></span><span></span> <span></span><span><span>soon</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span>.<span></span><span><span>8</span></span><span></span> <span></span><span><span>Applications</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Some</span></span><span></span> <span></span><span><span>applications</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>notably</span></span><span></span> <span></span><span><span>database</span></span><span></span> <span></span><span><span>programs</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>understand</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>accessing</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>caching</span></span><span></span> <span></span><span><span>needs</span></span><span></span> <span></span><span><span>better</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>general-purpose</span></span><span></span> <span></span><span><span>OS,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>should</span></span><span></span> <span></span><span><span>therefore</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>reign</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>own</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>management</span></span><span></span>.</li>
    <li><span></span><span><span>Sometimes</span></span><span></span> <span></span><span><span>such</span></span><span></span> <span></span><span><span>programs</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>raw</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>partition</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>work</span></span><span></span> <span></span><span><span>with,</span></span><span></span> <span></span><span><span>containing</span></span><span></span> <span></span><span><span>raw</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>blocks</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>no</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>structure</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>It</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>application</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>partition</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>extended</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>whatever</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>reasons</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>sees</span></span><span></span> <span></span><span><span>fit</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
</blockquote>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>5</span></span><span></span> <span></span><span><span>Allocation</span></span><span></span> <span></span><span><span>of</span></span><span></span> </h3>
<blockquote>
  <p><span></span><span><span>We</span></span><span></span> <span></span><span><span>said</span></span><span></span> <span></span><span><span>earlier</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>were</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>important</span></span><span></span> <span></span><span><span>tasks</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>management:</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>strategy</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>frame-allocation</span></span><span></span> <span></span><span><span>strategy</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>section</span></span><span></span> <span></span><span><span>covers</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>part</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>pair</span></span><span></span>.<span></span><span><span></span></span><span></span> </p>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>5</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>Minimum</span></span><span></span> <span></span><span><span>Number</span></span><span></span> <span></span><span><span>of</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>absolute</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>dependent</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>architecture,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>corresponds</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>worst-case</span></span><span></span> <span></span><span><span>scenario</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>touched</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>single</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>machine</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>instruction</span></span><span></span>.</li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>operands</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>spans</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>boundary,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>multiple</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>just</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>fetch</span></span><span></span>.</li>
    <li><span></span><span><span>Memory</span></span><span></span> <span></span><span><span>references</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>touch</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>pages,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>those</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>locations</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>span</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>boundaries,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>multiple</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>operand</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>also</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>worst</span></span><span></span> <span></span><span><span>case</span></span><span></span> <span></span><span><span>involves</span></span><span></span> <span></span><span><span>indirect</span></span><span></span> <span></span><span><span>addressing,</span></span><span></span> <span></span><span><span>particularly</span></span><span></span> <span></span><span><span>where</span></span><span></span> <span></span><span><span>multiple</span></span><span></span> <span></span><span><span>levels</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>indirect</span></span><span></span> <span></span><span><span>addressing</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>allowed</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Left</span></span><span></span> <span></span><span><span>unchecked,</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>pointer</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>pointer</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>pointer</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>pointer</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>theoretically</span></span><span></span> <span></span><span><span>touch</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>single</span></span><span></span> <span></span><span><span>machine</span></span><span></span> <span></span><span><span>instruction,</span></span><span></span> <span></span><span><span>requiring</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>loaded</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>physical</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>simultaneously</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>For</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>reason</span></span><span></span> <span></span><span><span>architectures</span></span><span></span> <span></span><span><span>place</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>limit</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>say</span></span><span></span> <span></span><span><span>16</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>levels</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>indirection</span></span><span></span> <span></span><span><span>allowed</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>instruction,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>enforced</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>counter</span></span><span></span> <span></span><span><span>initialized</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>limit</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>decremented</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>level</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>indirection</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>instruction</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>counter</span></span><span></span> <span></span><span><span>reaches</span></span><span></span> <span></span><span><span>zero,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>"excessive</span></span><span></span> <span></span><span><span>indirection"</span></span><span></span> <span></span><span><span>trap</span></span><span></span> <span></span><span><span>occurs</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>example</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>still</span></span><span></span> <span></span><span><span>require</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>17</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>process</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>5</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>Allocation</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span></span></span><span></span><strong><span></span><span><span>Equal</span></span><span></span> <span></span><span><span>Allocation</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span>If</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>m</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>n</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>share</span></span><span></span> <span></span><span><span>them,</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>m</span></span><span></span> <span></span><span><span>/</span></span><span></span> <span></span><span><span>n</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>leftovers</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>kept</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>free-frame</span></span><span></span> <span></span><span><span>buffer</span></span><span></span> <span></span><span><span>pool</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span></span></span><span></span><strong><span></span><span><span>Proportional</span></span><span></span> <span></span><span><span>Allocation</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span>Allocate</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>proportionally</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process,</span></span><span></span> <span></span><span><span>relative</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>total</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>processes</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>So</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>i</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>S_i,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>S</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>sum</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>S_i,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>P_i</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>a_i</span></span><span></span> <span></span><span><span>=</span></span><span></span> <span></span><span><span>m</span></span><span></span> <span></span><span><span>*</span></span><span></span> <span></span><span><span>S_i</span></span><span></span> <span></span><span><span>/</span></span><span></span> <span></span><span><span>S</span></span><span></span>.</li>
    <li><span></span><span><span>Variations</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>proportional</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>consider</span></span><span></span> <span></span><span><span>priority</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>rather</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>just</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>size</span></span><span></span>.</li>
    <li><span></span><span><span>Obviously</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>allocations</span></span><span></span> <span></span><span><span>fluctuate</span></span><span></span> <span></span><span><span>over</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>m,</span></span><span></span> <span></span><span><span>fluctuates,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>subject</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>constraints</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>allocation</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>allocations</span></span><span></span> <span></span><span><span>cannot</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>met,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>either</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>allowed</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>start</span></span><span></span> <span></span><span><span>until</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>become</span></span><span></span> <span></span><span><span>available</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>5</span></span><span></span>.<span></span><span><span>3</span></span><span></span> <span></span><span><span>Global</span></span><span></span> <span></span><span><span>versus</span></span><span></span> <span></span><span><span>Local</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>One</span></span><span></span> <span></span><span><span>big</span></span><span></span> <span></span><span><span>question</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>whether</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>occurs</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>local</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>global</span></span><span></span> <span></span><span><span>level</span></span><span></span>.</li>
    <li><span></span><span><span>With</span></span><span></span> <span></span><span><span>local</span></span><span></span> <span></span><span><span>replacement,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>fixed,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>occurs</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>amongst</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>process</span></span><span></span>.</li>
    <li><span></span><span><span>With</span></span><span></span> <span></span><span><span>global</span></span><span></span> <span></span><span><span>replacement,</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>potential</span></span><span></span> <span></span><span><span>victim,</span></span><span></span> <span></span><span><span>whether</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>currently</span></span><span></span> <span></span><span><span>belongs</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>seeking</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>not</span></span><span></span>.</li>
    <li><span></span><span><span>Local</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>allows</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>better</span></span><span></span> <span></span><span><span>control</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>own</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>rates,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>leads</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>consistent</span></span><span></span> <span></span><span><span>performance</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>over</span></span><span></span> <span></span><span><span>different</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>load</span></span><span></span> <span></span><span><span>levels</span></span><span></span>.</li>
    <li><span></span><span><span>Global</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>overall</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>efficient,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>commonly</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>approach</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>5</span></span><span></span>.<span></span><span><span>4</span></span><span></span> <span></span><span><span>Non-Uniform</span></span><span></span> <span></span><span><span>Memory</span></span><span></span> <span></span><span><span>Access</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>above</span></span><span></span> <span></span><span><span>arguments</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>assume</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>equivalent,</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>least</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>equivalent</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>times</span></span><span></span>.</li>
    <li><span></span><span><span>This</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>case</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>multiple-processor</span></span><span></span> <span></span><span><span>systems,</span></span><span></span> <span></span><span><span>especially</span></span><span></span> <span></span><span><span>where</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>physically</span></span><span></span> <span></span><span><span>located</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>separate</span></span><span></span> <span></span><span><span>circuit</span></span><span></span> <span></span><span><span>board</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>holds</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>portion</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>overall</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.</li>
    <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>these</span></span><span></span> <span></span><span><span>latter</span></span><span></span> <span></span><span><span>systems,</span></span><span></span> <span></span><span><span>CPUs</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>physically</span></span><span></span> <span></span><span><span>located</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>board</span></span><span></span> <span></span><span><span>much</span></span><span></span> <span></span><span><span>faster</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>boards</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>basic</span></span><span></span> <span></span><span><span>solution</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>akin</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>processor</span></span><span></span> <span></span><span><span>affinity</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>At</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>try</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>schedule</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>minimize</span></span><span></span> <span></span><span><span>cache</span></span><span></span> <span></span><span><span>misses,</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>try</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>allocate</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>those</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>boards,</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>minimize</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>times</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>presence</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>threads</span></span><span></span> <span></span><span><span>complicates</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>picture,</span></span><span></span> <span></span><span><span>especially</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>threads</span></span><span></span> <span></span><span><span>get</span></span><span></span> <span></span><span><span>loaded</span></span><span></span> <span></span><span><span>onto</span></span><span></span> <span></span><span><span>different</span></span><span></span> <span></span><span><span>processors</span></span><span></span>.</li>
    <li><span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>uses</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>lgroup</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>solution,</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>hierarchical</span></span><span></span> <span></span><span><span>fashion</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>relative</span></span><span></span> <span></span><span><span>latency</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>For</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>processors</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>RAM</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>single</span></span><span></span> <span></span><span><span>board</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>probably</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>lgroup</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Memory</span></span><span></span> <span></span><span><span>assignments</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>made</span></span><span></span> <span></span><span><span>within</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>lgroup</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>possible,</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>nearest</span></span><span></span> <span></span><span><span>lgroup</span></span><span></span> <span></span><span><span>otherwise</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>Where</span></span><span></span> <span></span><span><span>"nearest"</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>defined</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>having</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>lowest</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>time</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
</blockquote>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>6</span></span><span></span> </h3>
<ul>
  <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>cannot</span></span><span></span> <span></span><span><span>maintain</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>required</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>out,</span></span><span></span> <span></span><span><span>freeing</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>processes</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>intermediate</span></span><span></span> <span></span><span><span>level</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>scheduling</span></span><span></span>.</li>
  <li><span></span><span><span>But</span></span><span></span> <span></span><span><span>what</span></span><span></span> <span></span><span><span>about</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>keep</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>minimum,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>cannot</span></span><span></span> <span></span><span><span>keep</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>currently</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>regular</span></span><span></span> <span></span><span><span>basis?</span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>case</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>forced</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>again</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>very</span></span><span></span> <span></span><span><span>near</span></span><span></span> <span></span><span><span>future,</span></span><span></span> <span></span><span><span>leading</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>large</span></span><span></span> <span></span><span><span>numbers</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span>.</li>
  <li><span></span><span><span>A</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>spending</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>executing</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>said</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>thrashing</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> </li>
</ul>
<blockquote>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>6</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>Cause</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>Thrashing</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Early</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>scheduling</span></span><span></span> <span></span><span><span>schemes</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>control</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>level</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>multiprogramming</span></span><span></span> <span></span><span><span>allowed</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>utilization,</span></span><span></span> <span></span><span><span>adding</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>utilization</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>low</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>problem</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>filled</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>started</span></span><span></span> <span></span><span><span>spending</span></span><span></span> <span></span><span><span>lots</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>waiting</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>in,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>utilization</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>lower,</span></span><span></span> <span></span><span><span>causing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>schedule</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>add</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>even</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>exacerbating</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>problem!</span></span><span></span> <span></span><span><span>Eventually</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>essentially</span></span><span></span> <span></span><span><span>grind</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>halt</span></span><span></span>.</li>
    <li><span></span><span><span>Local</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>policies</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>prevent</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>thrashing</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>taking</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>away</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>processes,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>still</span></span><span></span> <span></span><span><span>tends</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>clog</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>queue,</span></span><span></span> <span></span><span><span>thereby</span></span><span></span> <span></span><span><span>slowing</span></span><span></span> <span></span><span><span>down</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>needs</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>even</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>little</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>matter</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_18_Thrashing.jpg" width="591" height="350"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>18</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Thrashing</span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <ul>
    <li><span></span><span><span>To</span></span><span></span> <span></span><span><span>prevent</span></span><span></span> <span></span><span><span>thrashing</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>provide</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>really</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>"right</span></span><span></span> <span></span><span><span>now",</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>how</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>know</span></span><span></span> <span></span><span><span>what</span></span><span></span> <span></span><span><span>that</span></span><span></span> </li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>locality</span></span><span></span> <span></span><span><span>model</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>notes</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>typically</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>references</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>locality,</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>making</span></span><span></span> <span></span><span><span>lots</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>references</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>general</span></span><span></span> <span></span><span><span>area</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>moving</span></span><span></span> <span></span><span><span>periodically</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>new</span></span><span></span> <span></span><span><span>locality,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>shown</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>19</span></span><span></span> <span></span><span><span>below</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>just</span></span><span></span> <span></span><span><span>keep</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>many</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>involved</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>locality,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faulting</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>occur</span></span><span></span> <span></span><span><span>primarily</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>switches</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>locality</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>another</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>E</span></span><span></span>.<span></span><span><span>g</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>function</span></span><span></span> <span></span><span><span>exits</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>another</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>called</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_19_MemoryReferenceLocality.jpg" width="723" height="917"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>19</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Locality</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>memory-reference</span></span><span></span> <span></span><span><span>pattern</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>6</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>Working-Set</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>model</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>concept</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>locality,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>defines</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>window</span></span><span></span></strong><span></span><span><span>,</span></span><span></span> <span></span><span><span></span></span><span></span></em><span></span><span><span>of</span></span><span></span> <span></span><span><span>length</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>delta</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>Whatever</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>included</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>most</span></span><span></span> <span></span><span><span>recent</span></span><span></span> <span></span><span><span>delta</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>references</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>said</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>window,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>comprise</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>illustrated</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>20:</span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_20_WorkingSetModel.jpg" width="693" height="174"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>20</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Working-set</span></span><span></span> <span></span><span><span>model</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>selection</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>delta</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>critical</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>success</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>model</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>too</span></span><span></span> <span></span><span><span>small</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>does</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>encompass</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>locality,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>too</span></span><span></span> <span></span><span><span>large,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>encompasses</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>no</span></span><span></span> <span></span><span><span>longer</span></span><span></span> <span></span><span><span>being</span></span><span></span> <span></span><span><span>frequently</span></span><span></span> <span></span><span><span>accessed</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>total</span></span><span></span> <span></span><span><span>demand,</span></span><span></span> <span></span><span><span>D,</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>sum</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>sizes</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>sets</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>processes</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>D</span></span><span></span> <span></span><span><span>exceeds</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>total</span></span><span></span> <span></span><span><span>number</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>least</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>thrashing,</span></span><span></span> <span></span><span><span>because</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>enough</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>satisfy</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>D</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>significantly</span></span><span></span> <span></span><span><span>less</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>currently</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>additional</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>launched</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>hard</span></span><span></span> <span></span><span><span>part</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>working-set</span></span><span></span> <span></span><span><span>model</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>keeping</span></span><span></span> <span></span><span><span>track</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>what</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>since</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>adds</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>removes</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>older</span></span><span></span> <span></span><span><span>page</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>An</span></span><span></span> <span></span><span><span>approximation</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>made</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>timer</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>goes</span></span><span></span> <span></span><span><span>off</span></span><span></span> <span></span><span><span>after</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>interval</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>references:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>For</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>suppose</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>timer</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>go</span></span><span></span> <span></span><span><span>off</span></span><span></span> <span></span><span><span>after</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>5000</span></span><span></span> <span></span><span><span>references</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>store</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>additional</span></span><span></span> <span></span><span><span>historical</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>addition</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Every</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>timer</span></span><span></span> <span></span><span><span>goes</span></span><span></span> <span></span><span><span>off,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>copied</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>historical</span></span><span></span> <span></span><span><span>bits,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>cleared</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>three</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>referenced</span></span><span></span> <span></span><span><span>within</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>last</span></span><span></span> <span></span><span><span>15,000</span></span><span></span> <span></span><span><span>references,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>considered</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>set</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Finer</span></span><span></span> <span></span><span><span>resolution</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>achieved</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>historical</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>frequent</span></span><span></span> <span></span><span><span>timer,</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>expense</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>greater</span></span><span></span> <span></span><span><span>overhead</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>6</span></span><span></span>.<span></span><span><span>3</span></span><span></span> <span></span><span><span>Page-Fault</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>A</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>direct</span></span><span></span> <span></span><span><span>approach</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>recognize</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>what</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>really</span></span><span></span> <span></span><span><span>want</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>control</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page-fault</span></span><span></span> <span></span><span><span>rate,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>allocate</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>directly</span></span><span></span> <span></span><span><span>measurable</span></span><span></span> <span></span><span><span>value</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page-fault</span></span><span></span> <span></span><span><span>rate</span></span><span></span> <span></span><span><span>exceeds</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>certain</span></span><span></span> <span></span><span><span>upper</span></span><span></span> <span></span><span><span>bound</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>needs</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>below</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>lower</span></span><span></span> <span></span><span><span>bound,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>afford</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>give</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>processes</span></span><span></span>.</li>
    <li><span></span><span><span>(</span></span><span></span> <span></span><span><span>I</span></span><span></span> <span></span><span><span>suppose</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page-replacement</span></span><span></span> <span></span><span><span>strategy</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>devised</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>select</span></span><span></span> <span></span><span><span>victim</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>lowest</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>page-fault</span></span><span></span> <span></span><span><span>frequency</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_21_PageFaultFrequency.jpg" width="736" height="388"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>21</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Page-fault</span></span><span></span> <span></span><span><span>frequency</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <ul>
    <li><span></span><span><span>Note</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>direct</span></span><span></span> <span></span><span><span>relationship</span></span><span></span> <span></span><span><span>between</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page-fault</span></span><span></span> <span></span><span><span>rate</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>working-set,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>moves</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>locality</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>another:</span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_22_PageFaultRate.jpg" width="773" height="363"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Unnumbered</span></span><span></span> <span></span><span><span>side</span></span><span></span> <span></span><span><span>bar</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>Ninth</span></span><span></span> <span></span><span><span>Edition</span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </p>
</blockquote>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>7</span></span><span></span> <span></span><span><span>Memory-Mapped</span></span><span></span> </h3>
<ul>
  <li><span></span><span><span>Rather</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>accessing</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>files</span></span><span></span> <span></span><span><span>directly</span></span><span></span> <span></span><span><span>via</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>access,</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>files</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>files,</span></span><span></span> <span></span><span><span>resulting</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>much</span></span><span></span> <span></span><span><span>faster</span></span><span></span> <span></span><span><span>accesses</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>except</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>course</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>page-faults</span></span><span></span> <span></span><span><span>occur</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>known</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>memory-mapping</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>file</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
</ul>
<blockquote>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>7</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>Basic</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Basically</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>mapped</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>range</span></span><span></span> <span></span><span><span>within</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process's</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>ordinary</span></span><span></span> <span></span><span><span>demand</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>system</span></span><span></span>.</li>
    <li><span></span><span><span>Note</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>writes</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>made</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>immediately</span></span><span></span> <span></span><span><span>written</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>disk</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>purpose</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>"flush(</span></span><span></span> <span></span><span><span>)"</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>call,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>stdout</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>cases</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>See</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span></span></span><span></span><a href="https://www.cs.uic.edu/~jbell/CourseNotes/timeKiller.html"><span></span><span><span>timekiller</span></span><span></span> <span></span><span><span>program</span></span><span></span></a><span></span><span><span></span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>example</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>this</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>why</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>important</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>"close(</span></span><span></span> <span></span><span><span>)"</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>done</span></span><span></span> <span></span><span><span>writing</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>So</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>safely</span></span><span></span> <span></span><span><span>flushed</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>so</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>freed</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>purposes</span></span><span></span>.</li>
    <li><span></span><span><span>Some</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>provide</span></span><span></span> <span></span><span><span>special</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>calls</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>map</span></span><span></span> <span></span><span><span>files</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>direct</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>otherwise</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Other</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>map</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>special</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>calls</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>map</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>otherwise,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>mapping</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>either</span></span><span></span> <span></span><span><span>case</span></span><span></span>.</li>
    <li><span></span><span><span>File</span></span><span></span> <span></span><span><span>sharing</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>made</span></span><span></span> <span></span><span><span>possible</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>mapping</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>process,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>shown</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>23</span></span><span></span> <span></span><span><span>below</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Copy-on-write</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>supported,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>mutual</span></span><span></span> <span></span><span><span>exclusion</span></span><span></span> <span></span><span><span>techniques</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>chapter</span></span><span></span> <span></span><span><span>6</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>avoid</span></span><span></span> <span></span><span><span>synchronization</span></span><span></span> <span></span><span><span>problems</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_23_MemoryMappedFiles.jpg" width="643" height="521"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>22</span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>Memory-mapped</span></span><span></span> <span></span><span><span>files</span></span><span></span>.</p>
  <ul>
    <li><span></span><span><span>Shared</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>implemented</span></span><span></span> <span></span><span><span>via</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>memory-mapped</span></span><span></span> <span></span><span><span>files</span></span><span></span> <span></span><span><span>(&nbsp;Windows&nbsp;),</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>implemented</span></span><span></span> <span></span><span><span>through</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>separate</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>(&nbsp;Linux,</span></span><span></span> <span></span><span><span>UNIX</span></span><span></span>.<span></span><span><span>&nbsp;)</span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>7</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>Shared</span></span><span></span> <span></span><span><span>Memory</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>Win32</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Windows</span></span><span></span> <span></span><span><span>implements</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>memory-mapped</span></span><span></span> <span></span><span><span>files,</span></span><span></span> <span></span><span><span>involving</span></span><span></span> <span></span><span><span>three</span></span><span></span> <span></span><span><span>basic</span></span><span></span> <span></span><span><span>steps:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Create</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>file,</span></span><span></span> <span></span><span><span>producing</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>HANDLE</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>new</span></span><span></span> <span></span><span><span>file</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Name</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>file</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>object,</span></span><span></span> <span></span><span><span>producing</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>HANDLE</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>object</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Map</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>object</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space,</span></span><span></span> <span></span><span><span>returning</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>base</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>void</span></span><span></span> <span></span><span><span>pointer</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>LPVOID</span></span><span></span> <span></span><span><span>)</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ol><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>This</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>illustrated</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>Figures</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>24</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>26</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>annotated</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_24_WindowsSharedMemory.jpg" width="670" height="284"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>23</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Shared</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>Windows</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>memory-mapped</span></span><span></span> <span></span><span><span>I/O</span></span><span></span>.<span></span><span><span></span></span><span></span></strong></p>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_25_ProducerWriting.jpg" width="772" height="982"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>24</span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_26_ConsumerReading.jpg" width="786" height="696"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>25</span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>7</span></span><span></span>.<span></span><span><span>3</span></span><span></span> <span></span><span><span>Memory-Mapped</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>All</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>devices</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>done</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>writing</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>reading</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>device's</span></span><span></span> <span></span><span><span>registers</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Normally</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>done</span></span><span></span> <span></span><span><span>via</span></span><span></span> <span></span><span><span>special</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>instructions</span></span><span></span>.</li>
    <li><span></span><span><span>For</span></span><span></span> <span></span><span><span>certain</span></span><span></span> <span></span><span><span>devices</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>makes</span></span><span></span> <span></span><span><span>sense</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>simply</span></span><span></span> <span></span><span><span>map</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>device's</span></span><span></span> <span></span><span><span>registers</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>addresses</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process's</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>space,</span></span><span></span> <span></span><span><span>making</span></span><span></span> <span></span><span><span>device</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>fast</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>simple</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>access</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Video</span></span><span></span> <span></span><span><span>controller</span></span><span></span> <span></span><span><span>cards</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>classic</span></span><span></span> <span></span><span><span>example</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>this</span></span><span></span>.</li>
    <li><span></span><span><span>Serial</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>parallel</span></span><span></span> <span></span><span><span>devices</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>mapped</span></span><span></span> <span></span><span><span>I/O,</span></span><span></span> <span></span><span><span>mapping</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>device</span></span><span></span> <span></span><span><span>registers</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>specific</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>addresses</span></span><span></span> <span></span><span><span>known</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>I/O</span></span><span></span> <span></span><span><span>Ports</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>e</span></span><span></span>.<span></span><span><span>g</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>0xF8</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Transferring</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>series</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>bytes</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>done</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>time,</span></span><span></span> <span></span><span><span>moving</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>fast</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>device</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>prepared</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>data,</span></span><span></span> <span></span><span><span>through</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>mechanisms:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span><em><span></span><span><span>Programmed</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>PIO</span></span><span></span> <span></span><span><span>)</span></span><span></span></em><span></span><span><span></span></span><span></span></strong><span></span><span><span>,</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>known</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>polling</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>CPU</span></span><span></span> <span></span><span><span>periodically</span></span><span></span> <span></span><span><span>checks</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>control</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>device,</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>see</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>ready</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>handle</span></span><span></span> <span></span><span><span>another</span></span><span></span> <span></span><span><span>byte</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>data</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span><em><span></span><span><span>Interrupt</span></span><span></span> <span></span><span><span>Driven</span></span><span></span>.<span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>device</span></span><span></span> <span></span><span><span>generates</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>interrupt</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>either</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>another</span></span><span></span> <span></span><span><span>byte</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>deliver</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>ready</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>receive</span></span><span></span> <span></span><span><span>another</span></span><span></span> <span></span><span><span>byte</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
</blockquote>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>8</span></span><span></span> <span></span><span><span>Allocating</span></span><span></span> <span></span><span><span>Kernel</span></span><span></span> </h3>
<ul>
  <li><span></span><span><span>Previous</span></span><span></span> <span></span><span><span>discussions</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>centered</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>memory,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>conveniently</span></span><span></span> <span></span><span><span>broken</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>page-sized</span></span><span></span> <span></span><span><span>chunks,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>fragmentation</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>occurs</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>average</span></span><span></span> <span></span><span><span>half-page</span></span><span></span> <span></span><span><span>lost</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>internal</span></span><span></span> <span></span><span><span>fragmentation</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>(&nbsp;segment</span></span><span></span>.</li>
  <li><span></span><span><span>There</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>additional</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>kernel,</span></span><span></span> <span></span><span><span>however,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>cannot</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>so</span></span><span></span> <span></span><span><span>easily</span></span><span></span> <span></span><span><span>paged</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Some</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>buffering</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>direct</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>devices,</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>therefore</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>contiguous</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>affected</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>paging</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Other</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>internal</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>structures</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>various</span></span><span></span> <span></span><span><span>sizes,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>since</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>often</span></span><span></span> <span></span><span><span>locked</span></span><span></span> <span></span><span><span>(&nbsp;restricted</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>being</span></span><span></span> <span></span><span><span>ever</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>out&nbsp;),</span></span><span></span> <span></span><span><span>management</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>resource</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>done</span></span><span></span> <span></span><span><span>carefully</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>avoid</span></span><span></span> <span></span><span><span>internal</span></span><span></span> <span></span><span><span>fragmentation</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>waste</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;I</span></span><span></span>.<span></span><span><span>e</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>you</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>like</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>consume</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>little</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>possible,</span></span><span></span> <span></span><span><span>leaving</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>much</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>possible</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>user</span></span><span></span> <span></span><span><span>processes</span></span><span></span>.<span></span><span><span>&nbsp;)</span></span><span></span> <span></span><span><span>Accordingly</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>several</span></span><span></span> <span></span><span><span>classic</span></span><span></span> <span></span><span><span>algorithms</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>place</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>allocating</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>structures</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
</ul>
<blockquote>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>8</span></span><span></span>.<span></span><span><span>1</span></span><span></span> <span></span><span><span>Buddy</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>Buddy</span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span></span></span><span></span> <span></span><span><span>System</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>allocates</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>power</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>allocator</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>Under</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>scheme,</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>always</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>power</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>2</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>4K,</span></span><span></span> <span></span><span><span>8K,</span></span><span></span> <span></span><span><span>16K,</span></span><span></span> <span></span><span><span>etc</span></span><span></span> <span></span><span><span>),</span></span><span></span> <span></span><span><span>rounding</span></span><span></span> <span></span><span><span>up</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>nearest</span></span><span></span> <span></span><span><span>power</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>necessary</span></span><span></span>.</li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>correct</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>currently</span></span><span></span> <span></span><span><span>available,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>formed</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>splitting</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>two,</span></span><span></span> <span></span><span><span>forming</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>matched</span></span><span></span> <span></span><span><span>buddies</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>And</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>available,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>largest</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>split,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>so</span></span><span></span> <span></span><span><span>on</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>One</span></span><span></span> <span></span><span><span>nice</span></span><span></span> <span></span><span><span>feature</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>buddy</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>exclusively</span></span><span></span> <span></span><span><span>ORed</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>block,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>resulting</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>buddy</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>size,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>allows</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>fast</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>easy</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>coalescing</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>blocks</span></span><span></span> <span></span><span><span>back</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>blocks</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>Free</span></span><span></span> <span></span><span><span>lists</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>maintained</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>block</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>necessary</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>available</span></span><span></span> <span></span><span><span>upon</span></span><span></span> <span></span><span><span>request,</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>largest</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>split</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>buddies</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>desired</span></span><span></span> <span></span><span><span>size</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;Recursively</span></span><span></span> <span></span><span><span>splitting</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>blocks</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>necessary</span></span><span></span>.<span></span><span><span>&nbsp;)</span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>When</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>freed,</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>buddy's</span></span><span></span> <span></span><span><span>address</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>calculated,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>list</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>block</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>checked</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>see</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>buddy</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>free</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>buddies</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>coalesced</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>block,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>repeated</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>successively</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>lists</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>See</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>annotated</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>Figure</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>27</span></span><span></span> <span></span><span><span>below</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>example</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_27_BuddySystem.jpg" width="900" height="518"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>26</span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>8</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>Slab</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>Slab</span></span><span></span> <span></span><span><span>Allocation</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>allocates</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>chunks</span></span><span></span> <span></span><span><span>called</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>slabs</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>,</span></span><span></span> <span></span><span><span>consisting</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>contiguous</span></span><span></span> <span></span><span><span>pages</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>creates</span></span><span></span> <span></span><span><span>separate</span></span><span></span> <span></span><span><span>caches</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>type</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>structure</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>might</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>slabs</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Initially</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>caches</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>marked</span></span><span></span> <span></span><span><span>empty,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>marked</span></span><span></span> <span></span><span><span>full</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>used</span></span><span></span>.</li>
    <li><span></span><span><span>New</span></span><span></span> <span></span><span><span>requests</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>cache</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>granted</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>empty</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>partially</span></span><span></span> <span></span><span><span>empty</span></span><span></span> <span></span><span><span>slabs,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>slabs</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>full,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>additional</span></span><span></span> <span></span><span><span>slabs</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>allocated</span></span><span></span>.</li>
    <li><span></span><span><span>(</span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>essentially</span></span><span></span> <span></span><span><span>amounts</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>allocating</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>arrays</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>structures,</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>large</span></span><span></span> <span></span><span><span>chunks</span></span><span></span> <span></span><span><span>suitable</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>structure</span></span><span></span> <span></span><span><span>being</span></span><span></span> <span></span><span><span>stored</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>For</span></span><span></span> <span></span><span><span>example</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>particular</span></span><span></span> <span></span><span><span>structure</span></span><span></span> <span></span><span><span>were</span></span><span></span> <span></span><span><span>512</span></span><span></span> <span></span><span><span>bytes</span></span><span></span> <span></span><span><span>long,</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>groups</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>8</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>4K</span></span><span></span> <span></span><span><span>pages</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>structure</span></span><span></span> <span></span><span><span>were</span></span><span></span> <span></span><span><span>3K,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>4</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>could</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>slab</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>12K</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>three</span></span><span></span> <span></span><span><span>4K</span></span><span></span> <span></span><span><span>pages</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>Benefits</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>slab</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>include</span></span><span></span> <span></span><span><span>lack</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>internal</span></span><span></span> <span></span><span><span>fragmentation</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>fast</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>space</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>individual</span></span><span></span> </li>
    <li><span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>uses</span></span><span></span> <span></span><span><span>slab</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>certain</span></span><span></span> <span></span><span><span>user-mode</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>allocations</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Linux</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>buddy</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>prior</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>2</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>switched</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>slab</span></span><span></span> <span></span><span><span>allocation</span></span><span></span> <span></span><span><span>since</span></span><span></span> <span></span><span><span>then</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span></span></span><span></span><strong><span></span><span><span>New</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>9th</span></span><span></span> <span></span><span><span>Edition:</span></span><span></span> <span></span><span><span>Linux</span></span><span></span> <span></span><span><span>SLOB</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>SLUB</span></span><span></span> <span></span><span><span>allocators</span></span><span></span> <span></span><span><span>replace</span></span><span></span> <span></span><span><span>SLAB</span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>SLOB,</span></span><span></span> <span></span><span><span>Simple</span></span><span></span> <span></span><span><span>List</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>Blocks,</span></span><span></span> <span></span><span><span>maintains</span></span><span></span> <span></span><span><span>3</span></span><span></span> <span></span><span><span>linked</span></span><span></span> <span></span><span><span>lists</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>blocks</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>small,</span></span><span></span> <span></span><span><span>medium,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>large</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>designed</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>imbedded</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>limited</span></span><span></span> <span></span><span><span>amounts</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>SLUB</span></span><span></span> <span></span><span><span>modifies</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>implementation</span></span><span></span> <span></span><span><span>issues</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>better</span></span><span></span> <span></span><span><span>performance</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>large</span></span><span></span> <span></span><span><span>numbers</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>processors</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_28_SlabAllocation.jpg" width="571" height="407"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>27</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Slab</span></span><span></span> <span></span><span><span>allocation</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
</blockquote>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>9</span></span><span></span> <span></span><span><span>Other</span></span><span></span> </h3>
<blockquote>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>9</span></span><span></span>.<span></span><span><span>1</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>basic</span></span><span></span> <span></span><span><span>idea</span></span><span></span> <span></span><span><span>behind</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>prepaging</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>predict</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>near</span></span><span></span> <span></span><span><span>future,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>actually</span></span><span></span> <span></span><span><span>requested</span></span><span></span>.</li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>know</span></span><span></span> <span></span><span><span>what</span></span><span></span> <span></span><span><span>its</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>was</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>time,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>swap</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>back</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>go</span></span><span></span> <span></span><span><span>ahead</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>back</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>entire</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set,</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>actually</span></span><span></span> <span></span><span><span>occur</span></span><span></span>.</li>
    <li><span></span><span><span>With</span></span><span></span> <span></span><span><span>small</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>files</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>go</span></span><span></span> <span></span><span><span>ahead</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>prepage</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>time</span></span><span></span>.</li>
    <li><span></span><span><span>Prepaging</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>benefit</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>prediction</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>good</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>eventually,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>slows</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>system</span></span><span></span> <span></span><span><span>down</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>prediction</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>wrong</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>9</span></span><span></span>.<span></span><span><span>2</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>quite</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>few</span></span><span></span> <span></span><span><span>trade-offs</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>small</span></span><span></span> <span></span><span><span>versus</span></span><span></span> <span></span><span><span>large</span></span><span></span> <span></span><span><span>page</span></span><span></span> </li>
    <li><span></span><span><span>Small</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>waste</span></span><span></span> <span></span><span><span>less</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>due</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>internal</span></span><span></span> <span></span><span><span>fragmentation</span></span><span></span>.</li>
    <li><span></span><span><span>Large</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>require</span></span><span></span> <span></span><span><span>smaller</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>tables</span></span><span></span>.</li>
    <li><span></span><span><span>For</span></span><span></span> <span></span><span><span>disk</span></span><span></span> <span></span><span><span>access,</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>latency</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>seek</span></span><span></span> <span></span><span><span>times</span></span><span></span> <span></span><span><span>greatly</span></span><span></span> <span></span><span><span>outweigh</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>actual</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>transfer</span></span><span></span> <span></span><span><span>times</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>makes</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>much</span></span><span></span> <span></span><span><span>faster</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>transfer</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>large</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>than</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>smaller</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>containing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>same</span></span><span></span> <span></span><span><span>amount</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>data</span></span><span></span>.</li>
    <li><span></span><span><span>Smaller</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>match</span></span><span></span> <span></span><span><span>locality</span></span><span></span> <span></span><span><span>better,</span></span><span></span> <span></span><span><span>because</span></span><span></span> <span></span><span><span>we</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>bringing</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>data</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>really</span></span><span></span> <span></span><span><span>needed</span></span><span></span>.</li>
    <li><span></span><span><span>Small</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>generate</span></span><span></span> <span></span><span><span>more</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults,</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>attending</span></span><span></span> <span></span><span><span>overhead</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>physical</span></span><span></span> <span></span><span><span>hardware</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>play</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>part</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>determining</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>size</span></span><span></span>.</li>
    <li><span></span><span><span>It</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>hard</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>determine</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>"optimal"</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>given</span></span><span></span> <span></span><span><span>system</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Current</span></span><span></span> <span></span><span><span>norms</span></span><span></span> <span></span><span><span>range</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>4K</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>4M,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>tend</span></span><span></span> <span></span><span><span>towards</span></span><span></span> <span></span><span><span>larger</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>sizes</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>passes</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>9</span></span><span></span>.<span></span><span><span>3</span></span><span></span> <span></span><span><span>TLB</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>TLB</span></span><span></span> <span></span><span><span>Reach</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>defined</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>amount</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>reached</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>listed</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>TLB</span></span><span></span>.</li>
    <li><span></span><span><span>Ideally</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>fit</span></span><span></span> <span></span><span><span>within</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reach</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>TLB</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>Increasing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>TLB</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>obvious</span></span><span></span> <span></span><span><span>way</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>increasing</span></span><span></span> <span></span><span><span>TLB</span></span><span></span> <span></span><span><span>reach,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>TLB</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>very</span></span><span></span> <span></span><span><span>expensive</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>draws</span></span><span></span> <span></span><span><span>lots</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>power</span></span><span></span>.</li>
    <li><span></span><span><span>Increasing</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>sizes</span></span><span></span> <span></span><span><span>increases</span></span><span></span> <span></span><span><span>TLB</span></span><span></span> <span></span><span><span>reach,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>leads</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>increased</span></span><span></span> <span></span><span><span>fragmentation</span></span><span></span> <span></span><span><span>loss</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>Some</span></span><span></span> <span></span><span><span>systems</span></span><span></span> <span></span><span><span>provide</span></span><span></span> <span></span><span><span>multiple</span></span><span></span> <span></span><span><span>size</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>increase</span></span><span></span> <span></span><span><span>TLB</span></span><span></span> <span></span><span><span>reach</span></span><span></span> <span></span><span><span>while</span></span><span></span> <span></span><span><span>keeping</span></span><span></span> <span></span><span><span>fragmentation</span></span><span></span> <span></span><span><span>low</span></span><span></span>.</li>
    <li><span></span><span><span>Multiple</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>sizes</span></span><span></span> <span></span><span><span>requires</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>TLB</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>managed</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>software,</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>hardware</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>9</span></span><span></span>.<span></span><span><span>4</span></span><span></span> <span></span><span><span>Inverted</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Inverted</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>tables</span></span><span></span> <span></span><span><span>store</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>entry</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>instead</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>entry</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>page</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>reduces</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>requirement</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table,</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>loses</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>information</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>implement</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>paging</span></span><span></span>.</li>
    <li><span></span><span><span>A</span></span><span></span> <span></span><span><span>solution</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>keep</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>separate</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>process,</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>management</span></span><span></span> <span></span><span><span>purposes</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>These</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>kept</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>disk,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>occurs</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>I</span></span><span></span>.<span></span><span><span>e</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>referenced</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>way</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>traditional</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>table</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>be</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>9</span></span><span></span>.<span></span><span><span>5</span></span><span></span> <span></span><span><span>Program</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Consider</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>pair</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>nested</span></span><span></span> <span></span><span><span>loops</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>element</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>1024</span></span><span></span> <span></span><span><span>x</span></span><span></span> <span></span><span><span>1024</span></span><span></span> <span></span><span><span>two-dimensional</span></span><span></span> <span></span><span><span>array</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>32-bit</span></span><span></span> <span></span><span><span>ints</span></span><span></span>.</li>
    <li><span></span><span><span>Arrays</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>C</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>stored</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>row-major</span></span><span></span> <span></span><span><span>order,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>means</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>row</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>array</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>occupy</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.</li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>loops</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>nested</span></span><span></span> <span></span><span><span>so</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>outer</span></span><span></span> <span></span><span><span>loop</span></span><span></span> <span></span><span><span>increments</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>row</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>inner</span></span><span></span> <span></span><span><span>loop</span></span><span></span> <span></span><span><span>increments</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>column,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>entire</span></span><span></span> <span></span><span><span>row</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>processed</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>next</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault,</span></span><span></span> <span></span><span><span>yielding</span></span><span></span> <span></span><span><span>1024</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>total</span></span><span></span>.</li>
    <li><span></span><span><span>On</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>hand,</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>loops</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>nested</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>way,</span></span><span></span> <span></span><span><span>so</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>program</span></span><span></span> <span></span><span><span>worked</span></span><span></span> <span></span><span><span>down</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>columns</span></span><span></span> <span></span><span><span>instead</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>across</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>rows,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>access</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>different</span></span><span></span> <span></span><span><span>page,</span></span><span></span> <span></span><span><span>yielding</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>new</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>access,</span></span><span></span> <span></span><span><span>or</span></span><span></span> <span></span><span><span>over</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>million</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>together</span></span><span></span>.</li>
    <li><span></span><span><span>Be</span></span><span></span> <span></span><span><span>aware</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>different</span></span><span></span> <span></span><span><span>languages</span></span><span></span> <span></span><span><span>store</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>arrays</span></span><span></span> <span></span><span><span>differently</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>FORTRAN</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>example</span></span><span></span> <span></span><span><span>stores</span></span><span></span> <span></span><span><span>arrays</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>column-major</span></span><span></span> <span></span><span><span>format</span></span><span></span> <span></span><span><span>instead</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>row-major</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>This</span></span><span></span> <span></span><span><span>means</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>blind</span></span><span></span> <span></span><span><span>translation</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>code</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>language</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>another</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>turn</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>fast</span></span><span></span> <span></span><span><span>program</span></span><span></span> <span></span><span><span>into</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>very</span></span><span></span> <span></span><span><span>slow</span></span><span></span> <span></span><span><span>one,</span></span><span></span> <span></span><span><span>strictly</span></span><span></span> <span></span><span><span>because</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>extra</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>faults</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>9</span></span><span></span>.<span></span><span><span>6</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>Interlock</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>Page</span></span><span></span> </h4>
  <blockquote>
    <p><span></span><span><span>There</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>several</span></span><span></span> <span></span><span><span>occasions</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>desirable</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>lock</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>pages</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>let</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>get</span></span><span></span> <span></span><span><span>paged</span></span><span></span> </p>
  </blockquote>
  <ul>
    <li><span></span><span><span>Certain</span></span><span></span> <span></span><span><span>kernel</span></span><span></span> <span></span><span><span>operations</span></span><span></span> <span></span><span><span>cannot</span></span><span></span> <span></span><span><span>tolerate</span></span><span></span> <span></span><span><span>having</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>swapped</span></span><span></span> <span></span><span><span>out</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>controller</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>doing</span></span><span></span> <span></span><span><span>direct-memory</span></span><span></span> <span></span><span><span>access,</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>wrong</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>change</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>middle</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>operation</span></span><span></span>.</li>
    <li><span></span><span><span>In</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>priority</span></span><span></span> <span></span><span><span>based</span></span><span></span> <span></span><span><span>scheduling</span></span><span></span> <span></span><span><span>system,</span></span><span></span> <span></span><span><span>low</span></span><span></span> <span></span><span><span>priority</span></span><span></span> <span></span><span><span>jobs</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>wait</span></span><span></span> <span></span><span><span>quite</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>while</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>getting</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>turn</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>CPU,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>danger</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>being</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>out</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>get</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>chance</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>use</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>even</span></span><span></span> <span></span><span><span>once</span></span><span></span> <span></span><span><span>after</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>in</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>situation</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>locked</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>in,</span></span><span></span> <span></span><span><span>until</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>requested</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>least</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>turn</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>CPU</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_29_IO_MemoryFrames.jpg" width="481" height="557"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>28</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>reason</span></span><span></span> <span></span><span><span>why</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>used</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>I/O</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
</blockquote>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>10</span></span><span></span> <span></span><span><span>Operating-System</span></span><span></span> <span></span><span><span>Examples</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>Optional</span></span><span></span> </h3>
<blockquote>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>10</span></span><span></span>.<span></span><span><span>1</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Windows</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>uses</span></span><span></span> <span></span><span><span>demand</span></span><span></span> <span></span><span><span>paging</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>clustering,</span></span><span></span> <span></span><span><span></span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>meaning</span></span><span></span> <span></span><span><span>they</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>multiple</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>whenever</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>occurs</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>maximum</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>normally</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>50</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>345</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>respectively</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>(&nbsp;Maximums</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>exceeded</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>rare</span></span><span></span> <span></span><span><span>circumstances</span></span><span></span>.</li>
    <li><span></span><span><span>Free</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>maintained</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>list,</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>threshold</span></span><span></span> <span></span><span><span>indicating</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>enough</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>available</span></span><span></span>.</li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>occurs</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>below</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>maximum,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>additional</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>allocated</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Otherwise</span></span><span></span> <span></span><span><span>some</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>must</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>replaced,</span></span><span></span> <span></span><span><span>using</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>local</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>replacement</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span>.</li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>amount</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>falls</span></span><span></span> <span></span><span><span>below</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>allowable</span></span><span></span> <span></span><span><span>threshold,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>working</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>trimming</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>occurs,</span></span><span></span> <span></span><span><span>taking</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>away</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>any</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>above</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>minimum,</span></span><span></span> <span></span><span><span>until</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>their</span></span><span></span> <span></span><span><span>minimums</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Then</span></span><span></span> <span></span><span><span>additional</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>allocated</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>need</span></span><span></span> <span></span><span><span>them</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>selecting</span></span><span></span> <span></span><span><span>victim</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>depends</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>type</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>processor:
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>On</span></span><span></span> <span></span><span><span>single</span></span><span></span> <span></span><span><span>processor</span></span><span></span> <span></span><span><span>80x86</span></span><span></span> <span></span><span><span>systems,</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>variation</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>clock</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>chance&nbsp;)</span></span><span></span> <span></span><span><span>algorithm</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>used</span></span><span></span>.<span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><li><span></span><span><span>On</span></span><span></span> <span></span><span><span>Alpha</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>multiprocessor</span></span><span></span> <span></span><span><span>systems,</span></span><span></span> <span></span><span><span>clearing</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>may</span></span><span></span> <span></span><span><span>require</span></span><span></span> <span></span><span><span>invalidating</span></span><span></span> <span></span><span><span>entries</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>TLB</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>other</span></span><span></span> <span></span><span><span>processors,</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>expensive</span></span><span></span> <span></span><span><span>operation</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>In</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>case</span></span><span></span> <span></span><span><span>Windows</span></span><span></span> <span></span><span><span>uses</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>variation</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>FIFO</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></li><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span></ul><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
  <h4><span></span><span><span>9</span></span><span></span>.<span></span><span><span>10</span></span><span></span>.<span></span><span><span>2</span></span><span></span> </h4>
  <ul>
    <li><span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>maintains</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>list</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>pages,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>allocates</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>faulting</span></span><span></span> <span></span><span><span>thread</span></span><span></span> <span></span><span><span>whenever</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>fault</span></span><span></span> <span></span><span><span>occurs</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>It</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>therefore</span></span><span></span> <span></span><span><span>imperative</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>minimum</span></span><span></span> <span></span><span><span>amount</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>kept</span></span><span></span> <span></span><span><span>on</span></span><span></span> <span></span><span><span>hand</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>all</span></span><span></span> <span></span><span><span>times</span></span><span></span>.</li>
    <li><span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>parameter,</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span>lotsfree,</span></span><span></span> <span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>usually</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>1/64</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>total</span></span><span></span> <span></span><span><span>physical</span></span><span></span> <span></span><span><span>memory</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>checks</span></span><span></span> <span></span><span><span>4</span></span><span></span> <span></span><span><span>times</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>see</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>falls</span></span><span></span> <span></span><span><span>below</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>threshhold,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>does,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>pageout</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>process</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>started</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
    <li><span></span><span><span>Pageout</span></span><span></span> <span></span><span><span>uses</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>variation</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>clock</span></span><span></span> <span></span><span><span>(</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>chance</span></span><span></span> <span></span><span><span>)</span></span><span></span> <span></span><span><span>algorithm,</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>hands</span></span><span></span> <span></span><span><span>rotating</span></span><span></span> <span></span><span><span>around</span></span><span></span> <span></span><span><span>through</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>table</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>The</span></span><span></span> <span></span><span><span>first</span></span><span></span> <span></span><span><span>hand</span></span><span></span> <span></span><span><span>clears</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>hand</span></span><span></span> <span></span><span><span>comes</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>afterwards</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>checks</span></span><span></span> <span></span><span><span>them</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>Any</span></span><span></span> <span></span><span><span>frame</span></span><span></span> <span></span><span><span>whose</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bit</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>reset</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>hand</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>out</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>Pageout</span></span><span></span> <span></span><span><span>method</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>adjustable</span></span><span></span> <span></span><span><span>by</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>distance</span></span><span></span> <span></span><span><span>between</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>two</span></span><span></span> <span></span><span><span>hands,</span></span><span></span> <span></span><span><span>(&nbsp;the</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>handspan</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span>&nbsp;),</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>speed</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>hands</span></span><span></span> <span></span><span><span>move</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span>For</span></span><span></span> <span></span><span><span>example,</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>hands</span></span><span></span> <span></span><span><span>each</span></span><span></span> <span></span><span><span>check</span></span><span></span> <span></span><span><span>100</span></span><span></span> <span></span><span><span>frames</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>second,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>handspan</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>1000</span></span><span></span> <span></span><span><span>frames,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>there</span></span><span></span> <span></span><span><span>would</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>10</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>interval</span></span><span></span> <span></span><span><span>between</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>leading</span></span><span></span> <span></span><span><span>hand</span></span><span></span> <span></span><span><span>clears</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>reference</span></span><span></span> <span></span><span><span>bits</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>time</span></span><span></span> <span></span><span><span>when</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>trailing</span></span><span></span> <span></span><span><span>hand</span></span><span></span> <span></span><span><span>checks</span></span><span></span> <span></span><span><span>them</span></span><span></span>.</li>
    <li><span></span><span><span>The</span></span><span></span> <span></span><span><span>speed</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>hands</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>usually</span></span><span></span> <span></span><span><span>adjusted</span></span><span></span> <span></span><span><span>according</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>amount</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>memory,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>shown</span></span><span></span> <span></span><span><span>below</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>Slowscan</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>usually</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>100</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>second,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span></span></span><span></span><strong><span></span><span><span>fastscan</span></span><span></span></strong><span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>usually</span></span><span></span> <span></span><span><span>set</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>smaller</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>1/2</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>total</span></span><span></span> <span></span><span><span>physical</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>8192</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>second</span></span><span></span>.<span></span><span><span></span></span><span></span> </li>
  </ul>
  <p align="center"><span></span><span><span></span></span><span></span><img src="./7_ Virtual Memory_files/9_30_SolarisPageScanner.jpg" width="651" height="445"><span></span><span><span></span></span><span></span><br><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span><strong><span></span><span><span>Figure</span></span><span></span> <span></span><span><span>9</span></span><span></span>.<span></span><span><span>29</span></span><span></span> <span></span><span><span>-</span></span><span></span> <span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>scanner</span></span><span></span>.<span></span><span><span></span></span><span></span></strong><span></span><span><span>
</span></span><span></span> <span></span><span><span></span></span><span></span> </p>
  <ul>
    <li><span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>also</span></span><span></span> <span></span><span><span>maintains</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>cache</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>reclaimed</span></span><span></span> <span></span><span><span>but</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>not</span></span><span></span> <span></span><span><span>yet</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>overwritten,</span></span><span></span> <span></span><span><span>as</span></span><span></span> <span></span><span><span>opposed</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>list</span></span><span></span> <span></span><span><span>which</span></span><span></span> <span></span><span><span>only</span></span><span></span> <span></span><span><span>holds</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>whose</span></span><span></span> <span></span><span><span>current</span></span><span></span> <span></span><span><span>contents</span></span><span></span> <span></span><span><span>are</span></span><span></span> <span></span><span><span>invalid</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>one</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>cache</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>needed</span></span><span></span> <span></span><span><span>before</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>gets</span></span><span></span> <span></span><span><span>moved</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>list,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>can</span></span><span></span> <span></span><span><span>be</span></span><span></span> <span></span><span><span>quickly</span></span><span></span> <span></span><span><span>recovered</span></span><span></span>.</li>
    <li><span></span><span><span>Normally</span></span><span></span> <span></span><span><span>pageout</span></span><span></span> <span></span><span><span>runs</span></span><span></span> <span></span><span><span>4</span></span><span></span> <span></span><span><span>times</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>check</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>has</span></span><span></span> <span></span><span><span>fallen</span></span><span></span> <span></span><span><span>below</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span>lotsfree</span></span><span></span>.<span></span><span><span></span></span><span></span></em><span></span><span><span></span></span><span></span> <span></span><span><span>However</span></span><span></span> <span></span><span><span>if</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>falls</span></span><span></span> <span></span><span><span>below</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span>desfree,</span></span><span></span> <span></span><span><span></span></span><span></span></em><span></span><span><span>then</span></span><span></span> <span></span><span><span>pageout</span></span><span></span> <span></span><span><span>will</span></span><span></span> <span></span><span><span>run</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>100</span></span><span></span> <span></span><span><span>times</span></span><span></span> <span></span><span><span>per</span></span><span></span> <span></span><span><span>second</span></span><span></span> <span></span><span><span>in</span></span><span></span> <span></span><span><span>an</span></span><span></span> <span></span><span><span>attempt</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>keep</span></span><span></span> <span></span><span><span>at</span></span><span></span> <span></span><span><span>least</span></span><span></span> <span></span><span><span>desfree</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>free</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span>If</span></span><span></span> <span></span><span><span>it</span></span><span></span> <span></span><span><span>is</span></span><span></span> <span></span><span><span>unable</span></span><span></span> <span></span><span><span>to</span></span><span></span> <span></span><span><span>do</span></span><span></span> <span></span><span><span>this</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>30-second</span></span><span></span> <span></span><span><span>average,</span></span><span></span> <span></span><span><span>then</span></span><span></span> <span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>begins</span></span><span></span> <span></span><span><span>swapping</span></span><span></span> <span></span><span><span>processes,</span></span><span></span> <span></span><span><span>starting</span></span><span></span> <span></span><span><span>preferably</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>processes</span></span><span></span> <span></span><span><span>that</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>been</span></span><span></span> <span></span><span><span>idle</span></span><span></span> <span></span><span><span>for</span></span><span></span> <span></span><span><span>a</span></span><span></span> <span></span><span><span>long</span></span><span></span> <span></span><span><span>time</span></span><span></span>.</li>
    <li><span></span><span><span>If</span></span><span></span> <span></span><span><span>free</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>falls</span></span><span></span> <span></span><span><span>below</span></span><span></span> <span></span><span><span></span></span><span></span><em><span></span><span><span>minfree,</span></span><span></span> <span></span><span><span></span></span><span></span></em><span></span><span><span>then</span></span><span></span> <span></span><span><span>pageout</span></span><span></span> <span></span><span><span>runs</span></span><span></span> <span></span><span><span>with</span></span><span></span> <span></span><span><span>every</span></span><span></span> <span></span><span><span>page</span></span><span></span> <span></span><span><span>fault</span></span><span></span>.</li>
    <li><span></span><span><span>Recent</span></span><span></span> <span></span><span><span>releases</span></span><span></span> <span></span><span><span>of</span></span><span></span> <span></span><span><span>Solaris</span></span><span></span> <span></span><span><span>have</span></span><span></span> <span></span><span><span>enhanced</span></span><span></span> <span></span><span><span>the</span></span><span></span> <span></span><span><span>virtual</span></span><span></span> <span></span><span><span>memory</span></span><span></span> <span></span><span><span>management</span></span><span></span> <span></span><span><span>system,</span></span><span></span> <span></span><span><span>including</span></span><span></span> <span></span><span><span>recognizing</span></span><span></span> <span></span><span><span>pages</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>shared</span></span><span></span> <span></span><span><span>libraries,</span></span><span></span> <span></span><span><span>and</span></span><span></span> <span></span><span><span>protecting</span></span><span></span> <span></span><span><span>them</span></span><span></span> <span></span><span><span>from</span></span><span></span> <span></span><span><span>being</span></span><span></span> <span></span><span><span>paged</span></span><span></span> <span></span><span><span>out</span></span><span></span>.<span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </li>
  </ul>
</blockquote>
<h3><span></span><span><span>9</span></span><span></span>.<span></span><span><span>11</span></span><span></span> </h3>
<h4><span></span><span><span>&nbsp;</span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> <span></span><span><span></span></span><span></span> </h4>


<script src="./7_ Virtual Memory_files/jquery.min.js.download"></script><script>function makeSpans(){$("h1, h2, h3, h4, h5, h6, p, li, td, img").each(function(){var s=splitText($(this).html());$(this).empty();for(var a="",h=0;h<s.length;h++)a+=s[h];$(this).html(a)})}function splitText(s){for(var a=[],h="",e=0;e<s.length;e++)if("<"===s.charAt(e)){a.push("<span>"+h+"</span>"),h="<";var i=1;do e++,"<"===s.charAt(e)&&i++,">"===s.charAt(e)&&i--,h+=s.charAt(e);while(i>0);console.log(h),a.push(h),h=""}else" "!=s.charAt(e)&&"."!=s.charAt(e)?h+=s.charAt(e):(console.log(h),a.push("<span>"+h+"</span>"),h="",a.push(""+s.charAt(e)));return a}$(document).ready(function(){makeSpans(),$("BODY").addClass("whiteBG"),$("span").on("click",function(){$(this).hasClass("hideWord")?($(this).removeClass("hideWord hoverOver"),$(this).addClass("hideWord2")):$(this).hasClass("hideWord2")?$(this).removeClass("hideWord2"):$(this).addClass("hideWord")}),$("span").hover(function(){$(this).hasClass("hideWord")&&$(this).addClass("hoverOver")},function(){$(this).removeClass("hoverOver")}),$("img").on("click",function(){$(this).hasClass("imageHide")?($(this).removeClass("imageHide"),$(this).addClass("imageReveal")):$(this).addClass("imageHide")}),$("img").hover(function(){$(this).hasClass("imageHide")&&$(this).addClass("imageReveal")},function(){$(this).removeClass("imageReveal")})});</script></body></html>